{"version":3,"sources":["../src/main-widget.es6"],"names":[],"mappings":"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","file":"main-widget.js","sourcesContent":["class TicketmasterCalendarWidget {\r\n\r\n    set config(attrs) { this.widgetConfig = this.loadConfig(attrs); }\r\n    get config() { return this.widgetConfig; }\r\n\r\n    set events(responce){ this.eventsList = this.parseEvents(responce);}\r\n    set events(responce){ this.eventsList = this.parseEvents(responce);}\r\n    get events(){ return this.eventsList;}\r\n\r\n    get borderSize(){ return this.config.border || 0;}\r\n\r\n    get widgetHeight(){ return this.config.height || 600;}\r\n\r\n    get widgetContentHeight() {\r\n        /* return this.widgetHeight - (this.isListView || this.isSimpleProportionM ? 0 : 39) || 600; */\r\n        return this.widgetHeight - 70;\r\n    }\r\n\r\n    get eventUrl(){ return \"http://www.ticketmaster.com/event/\"; }\r\n\r\n    get apiUrl(){ return \"https://app.ticketmaster.com/discovery/v2/events.json\"; }\r\n\r\n    get themeUrl() { return \"http://ticketmaster-api-staging.github.io/products-and-docs/widgets/calendar/1.0.0/theme/\"; }\r\n\r\n    get portalUrl(){ return \"http://ticketmaster-api-staging.github.io/\"; }\r\n\r\n    get logoUrl() { return \"http://www.ticketmaster.com/\"; }\r\n\r\n    get legalNoticeUrl() { return \"http://developer.ticketmaster.com/support/terms-of-use/\"; }\r\n\r\n    get questionUrl() { return \"http://developer.ticketmaster.com/support/faq/\"; }\r\n\r\n    get geocodeUrl() { return \"https://maps.googleapis.com/maps/api/geocode/json\"; }\r\n\r\n    get updateExceptions() { return [\"width\", \"height\", \"border\", \"borderradius\", \"colorscheme\", \"layout\", \"affiliateid\", \"propotion\", \"googleapikey\"]}\r\n\r\n    get sliderDelay(){ return 5000; }\r\n\r\n    get sliderRestartDelay(){ return 5000; }\r\n\r\n    get hideMessageDelay(){ return 5000; }\r\n\r\n    get controlHiddenClass(){ return \"events_control-hidden\"; }\r\n\r\n    get tmWidgetWhiteList(){ return [\"2200504BAD4C848F\", \"00005044BDC83AE6\", \"1B005068DB60687F\", \"1B004F4DBEE45E47\", \"3A004F4ED7829D5E\", \"3A004F4ED1FC9B63\", \"1B004F4FF83289C5\", \"1B004F4FC0276888\", \"0E004F4F3B7DC543\", \"1D004F4F09C61861\", \"1600505AC9A972A1\", \"22004F4FD82795C6\", \"01005057AFF54574\", \"01005056FAD8793A\", \"3A004F4FB2453240\", \"22004F50D2149AC6\", \"01005059AD49507A\", \"01005062B4236D5D\"]; }\r\n\r\n    get countriesWhiteList() {\r\n        return [\r\n            'Australia',\r\n            'Austria',\r\n            'Belgium',\r\n            'Canada',\r\n            'Denmark',\r\n            'Finland',\r\n            'France',\r\n            'Germany',\r\n            'Ireland',\r\n            'Mexico',\r\n            'Netherlands',\r\n            'New Zealand',\r\n            'Norway',\r\n            'Spain',\r\n            'Sweden',\r\n            'Turkey',\r\n            'UAE',\r\n            'United Kingdom',\r\n            'United States'\r\n        ]\r\n    }\r\n\r\n    isConfigAttrExistAndNotEmpty(attr) {\r\n        if( !this.config.hasOwnProperty(attr) || this.config[attr] === \"undefined\"){\r\n            return false;\r\n        }else if( this.config[attr] === \"\"){\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    get eventReqAttrs(){\r\n        let attrs = {},\r\n            params = [\r\n                {\r\n                    attr: 'tmapikey',\r\n                    verboseName: 'apikey'\r\n                },\r\n                {\r\n                    attr: 'keyword',\r\n                    verboseName: 'keyword'\r\n                },\r\n                {\r\n                    attr: 'size',\r\n                    verboseName: 'size'\r\n                },\r\n                {\r\n                    attr: 'radius',\r\n                    verboseName: 'radius'\r\n                },\r\n                {\r\n                    attr: 'classificationid',\r\n                    verboseName: 'classificationId'\r\n                },\r\n                {\r\n                    attr: 'attractionid',\r\n                    verboseName: 'attractionId'\r\n                },\r\n                {\r\n                    attr: 'promoterid',\r\n                    verboseName: 'promoterId'\r\n                },\r\n                {\r\n                    attr: 'venueid',\r\n                    verboseName: 'venueId'\r\n                },\r\n                {\r\n                    attr: 'segmentid',\r\n                    verboseName: 'segmentId'\r\n                }\r\n            ];\r\n\r\n        for(let i in params){\r\n            let item = params[i];\r\n            if(this.isConfigAttrExistAndNotEmpty(item.attr))\r\n                attrs[item.verboseName] = this.config[item.attr];\r\n        }\r\n\r\n        // Only one allowed at the same time\r\n        if(this.config.latlong){\r\n            attrs.latlong = this.config.latlong;\r\n        }else{\r\n            if(this.isConfigAttrExistAndNotEmpty(\"postalcode\"))\r\n                attrs.postalCode = this.config.postalcode;\r\n        }\r\n\r\n        if(this.isConfigAttrExistAndNotEmpty(\"period\")){\r\n            let period = this.getDateFromPeriod(this.config.period);\r\n            attrs.startDateTime = period[0];\r\n            attrs.endDateTime = period[1];\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n\r\n    constructor(root) {\r\n        if(!root) return;\r\n        this.widgetRoot = root;\r\n\r\n        this.tabsRootContainer = document.createElement(\"div\");\r\n        this.tabsRootContainer.classList.add(\"tabs\");\r\n        this.tabsRootContainer.innerHTML = '<span class=\"tb active\">Day</span><span class=\"tb\">Week</span><span class=\"tb\">Month</span><span class=\"tb\">Year</span>';\r\n        this.widgetRoot.appendChild(this.tabsRootContainer);\r\n\r\n        this.tabsRootContainer = document.createElement(\"div\");\r\n        this.tabsRootContainer.classList.add(\"tabs-container\");\r\n        this.widgetRoot.appendChild(this.tabsRootContainer);\r\n\r\n        this.tab1RootContainer = document.createElement(\"div\");\r\n        this.tab1RootContainer.classList.add(\"tab\");\r\n        this.tab1RootContainer.classList.add(\"active\");\r\n        this.tabsRootContainer.appendChild(this.tab1RootContainer);\r\n\r\n        let leftSelector = new SelectorControls(this.tab1RootContainer, 'sliderLeftSelector', this.getCurrentWeek(), 'period', this.update.bind(this));\r\n        let RightSelector = new SelectorControls(this.tab1RootContainer, 'sliderRightSelector', '<span class=\"selector-title\">All Events</span><span class=\"selector-content\" tabindex=\"-1\"><span class=\"active\" w-classificationId=\"\">All Events</span><span w-classificationId=\"KZFzniwnSyZfZ7v7na\">Arts & Theatre</span><span w-classificationId=\"KZFzniwnSyZfZ7v7nn\">Film</span><span w-classificationId=\"KZFzniwnSyZfZ7v7n1\">Miscellaneous</span><span w-classificationId=\"KZFzniwnSyZfZ7v7nJ\">Music</span><span w-classificationId=\"KZFzniwnSyZfZ7v7nE\">Sports</span></span>', 'classificationId', this.update.bind(this));\r\n\r\n        this.tab2RootContainer = document.createElement(\"div\");\r\n        this.tab2RootContainer.classList.add(\"tab\");\r\n        this.tab2RootContainer.innerHTML = '<div id=\"weekSheduler\">';\r\n        this.tabsRootContainer.appendChild(this.tab2RootContainer);\r\n\r\n        let leftSelector1 = new SelectorControls(this.tab2RootContainer, 'sliderLeftSelector', '<span class=\"selector-title\">Jun 12 - Jun 18</span><span class=\"selector-content\" tabindex=\"-1\"><span class=\"active\" w-period=\"\">Jun 12 - Jun 18</span><span w-period=\"\">Jun 19 - Jun 25</span><span w-period=\"\">Jun 26 - Jun 30</span></span>', 'period', this.update.bind(this));\r\n        let RightSelector1 = new SelectorControls(this.tab2RootContainer, 'sliderRightSelector', '<span class=\"selector-title\">All Events</span><span class=\"selector-content\" tabindex=\"-1\"><span class=\"active\" w-classificationId=\"\">All Events</span><span w-classificationId=\"KZFzniwnSyZfZ7v7na\">Arts & Theatre</span><span w-classificationId=\"KZFzniwnSyZfZ7v7nn\">Film</span><span w-classificationId=\"KZFzniwnSyZfZ7v7n1\">Miscellaneous</span><span w-classificationId=\"KZFzniwnSyZfZ7v7nJ\">Music</span><span w-classificationId=\"KZFzniwnSyZfZ7v7nE\">Sports</span></span>', 'classificationId', this.update.bind(this));\r\n\r\n        this.eventLogoBox = document.createElement(\"div\");\r\n        this.eventLogoBox.classList.add(\"event-logo-box-c\");\r\n        this.eventLogoBox.innerHTML = '<a class=\"event-logo-c\" target=\"_blank\" href=\"http://www.ticketmaster.com/\">Powered by:</a>';\r\n        this.tab2RootContainer.appendChild(this.eventLogoBox);\r\n\r\n\r\n        this.tab3RootContainer = document.createElement(\"div\");\r\n        this.tab3RootContainer.classList.add(\"tab\");\r\n        this.tab3RootContainer.innerHTML = \"This is MONTH TAB\";\r\n        this.tabsRootContainer.appendChild(this.tab3RootContainer);\r\n\r\n        this.tab4RootContainer = document.createElement(\"div\");\r\n        this.tab4RootContainer.classList.add(\"tab\");\r\n        this.tab4RootContainer.innerHTML = \"This is YEAR TAB\";\r\n        this.tabsRootContainer.appendChild(this.tab4RootContainer);\r\n\r\n        this.eventsRootContainer = document.createElement(\"div\");\r\n        this.eventsRootContainer.classList.add(\"events-root-container\");\r\n        this.tab1RootContainer.appendChild(this.eventsRootContainer);\r\n\r\n        this.eventsRoot = document.createElement(\"ul\");\r\n        this.eventsRoot.classList.add(\"events-root\");\r\n        this.eventsRootContainer.appendChild(this.eventsRoot);\r\n\r\n        this.config = this.widgetRoot.attributes;\r\n\r\n        if(this.config.theme !== null && !document.getElementById(`widget-theme-${this.config.theme}`)){\r\n            this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\r\n        }\r\n\r\n        this.eventsRootContainer.classList.remove(\"border\");\r\n        if(this.config.border){\r\n            this.eventsRootContainer.classList.add(\"border\");\r\n        }\r\n\r\n        this.widgetRoot.style.height = `${this.widgetHeight}px`;\r\n        this.widgetRoot.style.width  = `${this.config.width}px`;\r\n\r\n        this.eventsRootContainer.style.height = `${this.widgetContentHeight}px`;\r\n        this.eventsRootContainer.style.width  = `${this.config.width}px`;\r\n        this.eventsRootContainer.style.borderWidth = `0`;\r\n        this.widgetRoot.style.borderRadius = `${this.config.borderradius}px`;\r\n        this.widgetRoot.style.borderWidth = `${this.borderSize}px`;\r\n\r\n        //this.clear();\r\n\r\n        this.AdditionalElements();\r\n\r\n        this.getCoordinates(() => {\r\n            this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n        });\r\n\r\n        /*plugins for 'buy button'*/\r\n        this.embedUniversePlugin();\r\n        this.embedTMPlugin();\r\n\r\n        this.initBuyBtn();\r\n\r\n        this.initMessage();\r\n\r\n        if (!this.isListView) this.initSliderControls();\r\n\r\n        /* if (!this.isListView) this.initEventCounter(); */\r\n    }\r\n\r\n    getCurrentWeek() {\r\n        let monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n        let content = '<span class=\"selector-title\">';\r\n        let today = new Date();\r\n        let todayTmp = new Date();\r\n        content += monthNames[today.getMonth()] + ' ' + today.getDate();\r\n        content += '</span>';\r\n        content += '<span class=\"selector-content\" tabindex=\"-1\">';\r\n\r\n        for (var d=0; d<=6; d++) {\r\n            todayTmp.setDate(today.getDate() + d);\r\n            if (d == 0) content += `<span class=\"active\" w-period=\"${todayTmp}\">`;\r\n            else content += `<span w-period=\"${todayTmp}\">`;\r\n            content += monthNames[todayTmp.getMonth()] + ' ' + todayTmp.getDate();\r\n            content += '</span>';\r\n        }\r\n        content += '</span>';\r\n        return content;\r\n    }\r\n\r\n    getCoordinates(cb){\r\n        let widget = this;\r\n\r\n        function parseGoogleGeocodeResponse(){\r\n            if (this && this.readyState === XMLHttpRequest.DONE ) {\r\n                let latlong = '',\r\n                    results = null,\r\n                    countryShortName = '';\r\n                if(this.status === 200) {\r\n                    let response = JSON.parse(this.responseText);\r\n                    if (response.status === 'OK' && response.results.length) {\r\n                        // Filtering only white list countries\r\n                        results = response.results.filter((item) => {\r\n                            return widget.countriesWhiteList.filter((elem) => {\r\n                                    return elem === item.address_components[item.address_components.length - 1].long_name;\r\n                                }).length > 0;\r\n                        });\r\n\r\n                        if (results.length) {\r\n                            // sorting results by country name\r\n                            results.sort((f, g) => {\r\n                                let a = f.address_components[f.address_components.length - 1].long_name;\r\n                                let b = g.address_components[g.address_components.length - 1].long_name;\r\n                                if (a > b) {\r\n                                    return 1;\r\n                                }\r\n                                if (a < b) {\r\n                                    return -1;\r\n                                }\r\n                                return 0;\r\n                            });\r\n\r\n                            // Use first item if multiple results was found in one country or in different\r\n                            let geometry = results[0].geometry;\r\n                            countryShortName = results[0].address_components[results[0].address_components.length - 1].short_name;\r\n\r\n                            // If multiple results without country try to find USA as prefer value\r\n                            if (!widget.config.country) {\r\n                                for (let i in results) {\r\n                                    let result = results[i];\r\n                                    if (result.address_components) {\r\n                                        let country = result.address_components[result.address_components.length - 1];\r\n                                        if (country) {\r\n                                            if (country.short_name === 'US') {\r\n                                                countryShortName = 'US';\r\n                                                geometry = result.geometry;\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            if (geometry) {\r\n                                if (geometry.location) {\r\n                                    latlong = `${geometry.location.lat},${geometry.location.lng}`;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            results = null;\r\n                        }\r\n                    }\r\n                }\r\n                // Used in builder\r\n                if(widget.onLoadCoordinate) widget.onLoadCoordinate(results, countryShortName);\r\n                widget.config.latlong = latlong;\r\n                cb(widget.config.latlong);\r\n            }\r\n        }\r\n\r\n        if(this.isConfigAttrExistAndNotEmpty('postalcode')){\r\n            let args = {components: `postal_code:${widget.config.postalcode}`};\r\n            if(widget.config.googleapikey) args.key = widget.config.googleapikey;\r\n            if(this.config.country) args.components += `|country:${this.config.country}`;\r\n            this.makeRequest( parseGoogleGeocodeResponse, this.geocodeUrl, args);\r\n        }else{\r\n            // Used in builder\r\n            if(widget.onLoadCoordinate) widget.onLoadCoordinate(null);\r\n            widget.config.latlong = '';\r\n            widget.config.country = '';\r\n            cb(widget.config.latlong);\r\n        }\r\n    }\r\n\r\n    initBuyBtn(){\r\n        this.buyBtn = document.createElement(\"a\");\r\n        this.buyBtn.appendChild(document.createTextNode('BUY NOW'));\r\n        this.buyBtn.classList.add(\"event-buy-btn\");\r\n        this.buyBtn.classList.add(\"main-btn\");\r\n        this.buyBtn.target = '_blank';\r\n        this.buyBtn.href = '';\r\n        this.buyBtn.setAttribute('onclick', \"ga('send', 'event', 'DiscoveryClickBuyButton', 'click');\");\r\n        this.buyBtn.addEventListener('click', (e)=> {\r\n            e.preventDefault(); /*used in plugins for 'buy button'*/\r\n            this.stopAutoSlideX();\r\n            //console.log(this.config.affiliateid)\r\n        });\r\n        this.eventsRootContainer.appendChild(this.buyBtn);\r\n    }\r\n\r\n    setBuyBtnUrl(){\r\n        if(this.buyBtn){\r\n            let event = this.eventsGroups[this.currentSlideX][this.currentSlideY],\r\n                url = '';\r\n            if(event){\r\n                if(event.url){\r\n\r\n                    if((this.isUniversePluginInitialized && this.isUniverseUrl(event.url)) || (this.isTMPluginInitialized && this.isAllowedTMEvent(event.url))){\r\n                        url = event.url;\r\n                    }\r\n                }\r\n            }\r\n            this.buyBtn.href = url;\r\n        }\r\n    }\r\n\r\n    isUniverseUrl(url){\r\n        return (url.match(/universe.com/g) || url.match(/uniiverse.com/g));\r\n    }\r\n\r\n    isAllowedTMEvent(url){\r\n        for (var t = [/(?:ticketmaster\\.com)\\/(.*\\/)?event\\/([^\\/?#]+)/, /(?:concerts\\.livenation\\.com)\\/(.*\\/)?event\\/([^\\/?#]+)/], n = null, r = 0; r < t.length && (n = url.match(t[r]), null === n); r++);\r\n        let id = (null !== n ? n[2] : void 0);\r\n        return (this.tmWidgetWhiteList.indexOf(id) > -1);\r\n    }\r\n\r\n    embedTMPlugin(){\r\n        let id = 'id_tm_widget';\r\n        if( !document.getElementById(id) ) {\r\n            let script = document.createElement('script');\r\n            script.setAttribute('src', this.portalUrl + 'scripts/vendors/tm.js');\r\n            script.setAttribute('type', 'text/javascript');\r\n            script.setAttribute('charset', 'UTF-8');\r\n            script.setAttribute('id', id);\r\n            (document.head || document.getElementsByTagName('head')[0]).appendChild(script);\r\n        }\r\n        this.isTMPluginInitialized = true;\r\n    }\r\n\r\n    embedUniversePlugin(){\r\n        let id = 'id_universe_widget';\r\n        if( !document.getElementById(id) ){\r\n            let script = document.createElement('script');\r\n            script.setAttribute('src', 'https://www.universe.com/embed.js');\r\n            script.setAttribute('type', 'text/javascript');\r\n            script.setAttribute('charset', 'UTF-8');\r\n            script.setAttribute('id', id);\r\n            (document.head || document.getElementsByTagName('head')[0]).appendChild(script);\r\n        }\r\n        this.isUniversePluginInitialized = true;\r\n    }\r\n\r\n    initMessage(){\r\n        this.messageDialog = document.createElement('div');\r\n        this.messageDialog.classList.add(\"event-message\");\r\n        this.messageContent = document.createElement('div');\r\n        this.messageContent.classList.add(\"event-message__content\");\r\n\r\n        let messageClose = document.createElement('div');\r\n        messageClose.classList.add(\"event-message__btn\");\r\n        messageClose.addEventListener(\"click\", ()=> {\r\n            this.hideMessage();\r\n        });\r\n\r\n        this.messageDialog.appendChild(this.messageContent);\r\n        this.messageDialog.appendChild(messageClose);\r\n        this.eventsRootContainer.appendChild(this.messageDialog);\r\n    }\r\n\r\n    showMessage(message, hideMessageWithoutDelay){\r\n        if(message.length){\r\n            this.hideMessageWithoutDelay = hideMessageWithoutDelay;\r\n            this.messageContent.innerHTML = message;\r\n            this.messageDialog.classList.add(\"event-message-visible\");\r\n            if (this.messageTimeout) {\r\n                clearTimeout(this.messageTimeout); // Clear timeout if before 'hideMessageWithDelay' was called\r\n            }\r\n        }\r\n    }\r\n\r\n    hideMessageWithDelay(delay){\r\n        if(this.messageTimeout) clearTimeout(this.messageTimeout); // Clear timeout if this method was called before\r\n        this.messageTimeout = setTimeout(()=>{\r\n            this.hideMessage();\r\n        }, delay);\r\n    }\r\n\r\n    hideMessage(){\r\n        if(this.messageTimeout) clearTimeout(this.messageTimeout); // Clear timeout and hide message immediately.\r\n        this.messageDialog.classList.remove(\"event-message-visible\");\r\n    }\r\n\r\n    AdditionalElements(){\r\n        /*\r\n        var legalNoticeContent = document.createTextNode('Legal Notice'),\r\n            legalNotice = document.createElement(\"a\");\r\n        legalNotice.appendChild(legalNoticeContent);\r\n        legalNotice.classList.add(\"legal-notice\");\r\n        legalNotice.target = '_blank';\r\n        legalNotice.href = this.legalNoticeUrl;\r\n        this.widgetRoot.appendChild(legalNotice);\r\n        */\r\n\r\n        var logo = document.createElement('a');\r\n        logo.classList.add(\"event-logo\");\r\n        logo.target = '_blank';\r\n        logo.href = this.logoUrl;\r\n        logo.innerHTML = 'Powered by:';\r\n\r\n        var logoBox = document.createElement('div');\r\n        logoBox.classList.add(\"event-logo-box\");\r\n        logoBox.appendChild(logo);\r\n        this.eventsRootContainer.appendChild(logoBox);\r\n\r\n        let question = document.createElement('a');\r\n        question.classList.add(\"event-question\");\r\n        question.target = '_blank';\r\n        question.href = this.questionUrl;\r\n        this.widgetRoot.appendChild(question);\r\n    }\r\n\r\n    hideSliderControls(){\r\n        this.prevEventX.classList.add(this.controlHiddenClass);\r\n        this.nextEventX.classList.add(this.controlHiddenClass);\r\n        this.prevEventY.classList.add(this.controlHiddenClass);\r\n        this.nextEventY.classList.add(this.controlHiddenClass);\r\n    }\r\n\r\n    toggleControlsVisibility(){\r\n        // Horizontal\r\n        if(this.slideCountX > 1){\r\n            this.prevEventX.classList.remove(this.controlHiddenClass);\r\n            this.nextEventX.classList.remove(this.controlHiddenClass);\r\n            if(this.currentSlideX === 0){\r\n                this.prevEventX.classList.add(this.controlHiddenClass);\r\n            }else if(this.currentSlideX === this.slideCountX - 1){\r\n                this.nextEventX.classList.add(this.controlHiddenClass);\r\n            }\r\n        }else{\r\n            this.prevEventX.classList.add(this.controlHiddenClass);\r\n            this.nextEventX.classList.add(this.controlHiddenClass);\r\n        }\r\n\r\n        // Vertical\r\n        if(this.eventsGroups.length){\r\n            if(this.eventsGroups[this.currentSlideX].length > 1){\r\n                this.prevEventY.classList.remove(this.controlHiddenClass);\r\n                this.nextEventY.classList.remove(this.controlHiddenClass);\r\n                if(this.currentSlideY === 0){\r\n                    this.prevEventY.classList.add(this.controlHiddenClass);\r\n                }else if(this.currentSlideY === this.eventsGroups[this.currentSlideX].length - 1){\r\n                    this.nextEventY.classList.add(this.controlHiddenClass);\r\n                }\r\n            }else{\r\n                this.prevEventY.classList.add(this.controlHiddenClass);\r\n                this.nextEventY.classList.add(this.controlHiddenClass);\r\n            }\r\n        }else{\r\n            this.prevEventY.classList.add(this.controlHiddenClass);\r\n            this.nextEventY.classList.add(this.controlHiddenClass);\r\n        }\r\n    }\r\n\r\n    prevSlideX(){\r\n        if(this.currentSlideX > 0){\r\n            this.setSlideManually(this.currentSlideX - 1, true);\r\n        }\r\n    }\r\n\r\n    nextSlideX(){\r\n        if(this.slideCountX - 1 > this.currentSlideX) {\r\n            this.setSlideManually(this.currentSlideX + 1, true);\r\n        }\r\n    }\r\n\r\n    prevSlideY(){\r\n        if(this.currentSlideY > 0){\r\n            this.setSlideManually(this.currentSlideY - 1, false);\r\n        }\r\n    }\r\n\r\n    nextSlideY(){\r\n        if(this.eventsGroups[this.currentSlideX].length - 1 > this.currentSlideY) {\r\n            this.setSlideManually(this.currentSlideY + 1, false);\r\n        }\r\n    }\r\n\r\n    setSlideManually(slideIndex, isDirectionX){\r\n        this.stopAutoSlideX();\r\n        this.sliderTimeout = setTimeout(()=>{\r\n            this.runAutoSlideX();\r\n        }, this.sliderRestartDelay);\r\n        if(isDirectionX)\r\n            this.goToSlideX(slideIndex);\r\n        else\r\n            this.goToSlideY(slideIndex);\r\n    }\r\n\r\n    goToSlideX(slideIndex){\r\n        if(this.currentSlideX === slideIndex) return;\r\n        this.currentSlideY = 0;\r\n        this.currentSlideX = slideIndex;\r\n        this.eventsRoot.style.marginLeft = `-${this.currentSlideX * 100}%`;\r\n        this.toggleControlsVisibility();\r\n        this.setEventsCounter();\r\n        this.setBuyBtnUrl();\r\n    }\r\n\r\n    goToSlideY(slideIndex){\r\n        if(this.currentSlideY === slideIndex) return;\r\n        this.currentSlideY = slideIndex;\r\n        let eventGroup = this.eventsRoot.getElementsByClassName(\"event-group-\" + this.currentSlideX);\r\n        if(eventGroup.length){\r\n            eventGroup = eventGroup[0];\r\n            eventGroup.style.marginTop = `-${this.currentSlideY * (this.widgetContentHeight - this.borderSize * 2)}px`;\r\n            this.toggleControlsVisibility();\r\n            this.setBuyBtnUrl();\r\n        }\r\n    }\r\n\r\n    runAutoSlideX(){\r\n        if(this.slideCountX > 1) {\r\n            this.sliderInterval = setInterval(()=> {\r\n                var slideIndex = 0;\r\n                if (this.slideCountX - 1 > this.currentSlideX) slideIndex = this.currentSlideX + 1;\r\n                this.goToSlideX(slideIndex);\r\n            }, this.sliderDelay);\r\n        }\r\n    }\r\n\r\n    stopAutoSlideX(){\r\n        if(this.sliderTimeout) clearTimeout(this.sliderTimeout);\r\n        if(this.sliderInterval) clearInterval(this.sliderInterval);\r\n    }\r\n\r\n    initSliderControls(){\r\n        this.currentSlideX = 0;\r\n        this.currentSlideY = 0;\r\n        this.slideCountX = 0;\r\n        let coreCssClass = 'events_control';\r\n\r\n        // left btn\r\n        this.prevEventX = document.createElement(\"div\");\r\n        let prevEventXClass = [coreCssClass, coreCssClass + '-horizontal', coreCssClass + '-left', this.controlHiddenClass];\r\n        for(let i in prevEventXClass){\r\n            this.prevEventX.classList.add(prevEventXClass[i]);\r\n        }\r\n        this.eventsRootContainer.appendChild(this.prevEventX);\r\n\r\n        // right btn\r\n        this.nextEventX = document.createElement(\"div\");\r\n        let nextEventXClass = [coreCssClass, coreCssClass + '-horizontal', coreCssClass + '-right', this.controlHiddenClass];\r\n        for(let i in nextEventXClass){\r\n            this.nextEventX.classList.add(nextEventXClass[i]);\r\n        }\r\n        this.eventsRootContainer.appendChild(this.nextEventX);\r\n\r\n        // top btn\r\n        this.prevEventY = document.createElement(\"div\");\r\n        let prevEventYClass = [coreCssClass, coreCssClass + '-vertical', coreCssClass + '-top', this.controlHiddenClass];\r\n        for(let i in prevEventYClass ){\r\n            this.prevEventY.classList.add(prevEventYClass[i]);\r\n        }\r\n        this.eventsRootContainer.appendChild(this.prevEventY);\r\n\r\n        // bottom btn\r\n        this.nextEventY = document.createElement(\"div\");\r\n        let nextEventYClass = [coreCssClass, coreCssClass + '-vertical', coreCssClass + '-bottom', this.controlHiddenClass];\r\n        for(let i in nextEventYClass){\r\n            this.nextEventY.classList.add(nextEventYClass[i]);\r\n        }\r\n        this.eventsRootContainer.appendChild(this.nextEventY);\r\n\r\n        // Restore events group position\r\n        function whichTransitionEvent(){\r\n            let el = document.createElement('fakeelement'),\r\n                transitions = {\r\n                    'transition':'transitionend',\r\n                    'OTransition':'oTransitionEnd',\r\n                    'MozTransition':'transitionend',\r\n                    'WebkitTransition':'webkitTransitionEnd'\r\n                };\r\n\r\n            for(let event in transitions){\r\n                if( el.style[event] !== undefined ) return transitions[event];\r\n            }\r\n        }\r\n\r\n        var transitionEvent = whichTransitionEvent();\r\n        transitionEvent && this.eventsRoot.addEventListener(transitionEvent, (e)=> {\r\n            if (this.eventsRoot !== e.target) return;\r\n            let eventGroup = this.eventsRoot.getElementsByClassName(\"event-group\");\r\n            // Reset all groups. We don't know what event group was visible before.\r\n            for(let i = 0; eventGroup.length > i; i++){\r\n                eventGroup[i].style.marginTop = 0;\r\n            }\r\n        });\r\n\r\n        // Arrows\r\n        this.prevEventX.addEventListener(\"click\", ()=> {\r\n            this.prevSlideX();\r\n        });\r\n\r\n        this.nextEventX.addEventListener(\"click\", ()=> {\r\n            this.nextSlideX();\r\n        });\r\n\r\n        this.prevEventY.addEventListener(\"click\", ()=> {\r\n            this.prevSlideY();\r\n        });\r\n\r\n        this.nextEventY.addEventListener(\"click\", ()=> {\r\n            this.nextSlideY();\r\n        });\r\n\r\n        // Tough device swipes\r\n        let xDown = null,\r\n            yDown = null;\r\n\r\n        function handleTouchStart(evt) {\r\n            xDown = evt.touches[0].clientX;\r\n            yDown = evt.touches[0].clientY;\r\n        }\r\n\r\n        function handleTouchMove(evt) {\r\n            if ( ! xDown || ! yDown ) return;\r\n\r\n            let xUp = evt.touches[0].clientX,\r\n                yUp = evt.touches[0].clientY,\r\n                xDiff = xDown - xUp,\r\n                yDiff = yDown - yUp;\r\n\r\n            if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {\r\n                if ( xDiff > 0 )\r\n                    this.nextSlideX(); // left swipe\r\n                else\r\n                    this.prevSlideX(); // right swipe\r\n            } else {\r\n                if ( yDiff > 0 )\r\n                    this.nextSlideY(); // up swipe\r\n                else\r\n                    this.prevSlideY(); // down swipe\r\n            }\r\n\r\n            xDown = null;\r\n            yDown = null;\r\n        }\r\n\r\n        this.eventsRootContainer.addEventListener('touchstart', (e)=> {\r\n            if(this.config.theme !== \"listview\") { if (e.target.className != 'event-logo' && e.target.className != 'event-question') e.preventDefault(); } /*used in plugins for 'buy button'*/\r\n            handleTouchStart.call(this, e);\r\n        }, false);\r\n        this.eventsRootContainer.addEventListener('touchmove', (e)=> {\r\n            if(this.config.theme !== \"listview\") { if (e.target.className != 'event-logo' && e.target.className != 'event-question') e.preventDefault(); }\r\n            handleTouchMove.call(this, e);\r\n        }, false);\r\n    }\r\n\r\n    initSlider(){\r\n        if(this.sliderInterval) clearInterval(this.sliderInterval);\r\n        if(this.sliderTimeout) clearTimeout(this.sliderTimeout);\r\n        this.slideCountX = this.eventsGroups.length;\r\n        this.eventsRoot.style.marginLeft = '0%';\r\n        this.eventsRoot.style.width = `${this.slideCountX * 100}%`;\r\n        this.currentSlideX = 0;\r\n        this.currentSlideY = 0;\r\n        this.runAutoSlideX();\r\n        this.toggleControlsVisibility();\r\n        this.setBuyBtnUrl();\r\n    }\r\n\r\n    formatDate(date) {\r\n        var result = '';\r\n        if(!date.day) return result; // Day is required\r\n\r\n        function LZ(x) {\r\n            return (x < 0 || x > 9 ? \"\" : \"0\") + x\r\n        }\r\n        var MONTH_NAMES = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],\r\n            DAY_NAMES = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\r\n            dayArray = date.day.split('-'),\r\n            d = parseInt(dayArray[2]),\r\n            M = parseInt(dayArray[1]);\r\n\r\n        var E = new Date(date.day).getDay();\r\n        result = DAY_NAMES[E] + ', ' + MONTH_NAMES[M - 1] + ' ' + d + ', ' + dayArray[0];\r\n\r\n        if(!date.time) return result;\r\n\r\n        var timeArray = date.time.split(':'),\r\n            H = parseInt(timeArray[0]),\r\n            m = timeArray[1],\r\n            a = \"AM\";\r\n\r\n        if (H > 11) a = \"PM\";\r\n        if (H == 0) {\r\n            H = 12;\r\n        } else if (H > 12) {\r\n            H = H - 12;\r\n        }\r\n\r\n        return result + ' ' + LZ(H) + ':' + m + ' ' + a;\r\n    }\r\n\r\n    clearEvents(){\r\n        this.eventsRoot.innerHTML = \"\";\r\n    }\r\n\r\n    clear(){\r\n        var modificatorList = this.widgetRoot.getElementsByClassName('modificator');\r\n        while (modificatorList.length) {\r\n            let el = modificatorList[0],\r\n                parent = el.parentNode;\r\n            parent.removeChild(el);\r\n        }\r\n\r\n        this.clearEvents();\r\n    }\r\n\r\n    update() {\r\n\r\n        let oldTheme = this.config.constructor();\r\n        for (let attr in this.config) {\r\n            if (this.config.hasOwnProperty(attr)) oldTheme[attr] = this.config[attr];\r\n        }\r\n\r\n        this.config = this.widgetRoot.attributes;\r\n\r\n        this.widgetRoot.style.height = `${this.widgetHeight}px`;\r\n        this.widgetRoot.style.width  = `${this.config.width}px`;\r\n        this.widgetRoot.style.borderRadius = `${this.config.borderradius}px`;\r\n        this.widgetRoot.style.borderWidth = `${this.borderSize}px`;\r\n        /*\r\n        this.eventsRootContainer.style.height = `${this.widgetContentHeight}px`;\r\n        this.eventsRootContainer.style.width  = `${this.config.width}px`;\r\n        this.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\r\n        this.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\r\n        */\r\n\r\n        this.getCurrentWeek();\r\n\r\n        this.eventsRootContainer.classList.remove(\"border\");\r\n        if( this.config.hasOwnProperty(\"border\") ){\r\n            this.eventsRootContainer.classList.add(\"border\");\r\n        }\r\n\r\n        if(this.needToUpdate(this.config, oldTheme, this.updateExceptions)){\r\n            this.clear();\r\n\r\n            /*\r\n            if( this.themeModificators.hasOwnProperty( this.widgetConfig.theme ) ) {\r\n                this.themeModificators[ this.widgetConfig.theme ]();\r\n            }\r\n            */\r\n\r\n            this.getCoordinates(() => {\r\n                this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n            });\r\n\r\n        }\r\n        else{\r\n            let events = this.eventsRoot.getElementsByClassName(\"event-wrapper\");\r\n            for(let i in events){\r\n                if(events.hasOwnProperty(i) && events[i].style !== undefined){\r\n                    events[i].style.width = `${this.config.width}px`;\r\n                    events[i].style.height = `${this.widgetContentHeight}px`;\r\n                }\r\n            }\r\n                this.goToSlideY(0);\r\n        }\r\n\r\n    }\r\n\r\n    needToUpdate(newTheme, oldTheme, forCheck = []){\r\n        return Object.keys(newTheme).map(function(key){\r\n                if(forCheck.indexOf(key) > -1) return true;\r\n                //console.warn([key, newTheme[key], oldTheme[key], newTheme[key] === oldTheme[key]])\r\n                return newTheme[key] === oldTheme[key] ;\r\n            }).indexOf(false) > -1\r\n    }\r\n\r\n    loadConfig(NamedNodeMap){\r\n        var config = {};\r\n        Object.keys(NamedNodeMap).map(function(value){\r\n            if( typeof(NamedNodeMap[value].name) !== \"undefined\" && NamedNodeMap[value].name.indexOf(\"w-\") !== -1){\r\n                config[ NamedNodeMap[value].name.replace(/w-/g, \"\").replace(/-/g, \"\") ] = NamedNodeMap[value].value;\r\n            }\r\n        });\r\n        return config;\r\n    }\r\n\r\n    styleLoadingHandler(){\r\n        if (this && this.readyState == XMLHttpRequest.DONE ) {\r\n            if(this.status == 200){\r\n                var style = document.createElement(\"style\");\r\n                style.setAttribute(\"type\",\"text/css\");\r\n                style.setAttribute(\"id\",`widget-theme-${this.widget.config.theme}`);\r\n                style.textContent = this.responseText;\r\n                document.getElementsByTagName(\"head\")[0].appendChild(style);\r\n            }\r\n            else {\r\n                //alert(\"theme wasn't loaded\");\r\n                console.log(\"theme wasn't loaded\");\r\n            }\r\n        }\r\n    }\r\n\r\n    groupEventsByName(){\r\n        let groups = {};\r\n        this.events.map(function(event){\r\n            if (groups[event.name] === undefined) groups[event.name] = [];\r\n            groups[event.name].push(event);\r\n        });\r\n\r\n        this.eventsGroups = [];\r\n        for (let groupName in groups) {\r\n            this.eventsGroups.push(groups[groupName]);\r\n        }\r\n    }\r\n\r\n    initEventCounter(){\r\n        this.eventsCounter = document.createElement(\"div\");\r\n        this.eventsCounter.classList.add(\"events-counter\");\r\n        this.widgetRoot.appendChild(this.eventsCounter);\r\n    }\r\n\r\n    setEventsCounter(){\r\n        if(this.eventsCounter){\r\n            let text = '';\r\n            if(this.eventsGroups.length){\r\n                if(this.eventsGroups.length > 1){\r\n                    text = `${this.currentSlideX + 1} of ${this.eventsGroups.length} events`;\r\n                } else {\r\n                    text = '1 event';\r\n                }\r\n            }\r\n            this.eventsCounter.innerHTML = text;\r\n        }\r\n    }\r\n\r\n    resetReduceParamsOrder(){\r\n        this.reduceParamsOrder = 0;\r\n    }\r\n\r\n    reduceParamsAndReloadEvents(){\r\n        let eventReqAttrs = {},\r\n            reduceParamsList = [\r\n                ['startDateTime', 'endDateTime', 'country'],\r\n                ['radius'],\r\n                ['postalCode', 'latlong'],\r\n                ['classificationId'],\r\n                ['attractionId'],\r\n                ['promoterId'],\r\n                ['segmentId'],\r\n                ['venueId'],\r\n                ['keyword'],\r\n                ['size']\r\n            ];\r\n\r\n        // make copy of params\r\n        for(let key in this.eventReqAttrs){\r\n            eventReqAttrs[key] = this.eventReqAttrs[key]\r\n        }\r\n\r\n        if(!this.reduceParamsOrder) this.reduceParamsOrder = 0;\r\n        if(reduceParamsList.length > this.reduceParamsOrder){\r\n            for(let item in reduceParamsList){\r\n                if(this.reduceParamsOrder >= item){\r\n                    for(let i in reduceParamsList[item]){\r\n                        delete eventReqAttrs[reduceParamsList[item][i]];\r\n                    }\r\n                }\r\n            }\r\n\r\n            if(this.reduceParamsOrder === 0) this.showMessage(\"No results were found.<br/>Here other options for you.\");\r\n            this.reduceParamsOrder++;\r\n            this.makeRequest( this.eventsLoadingHandler, this.apiUrl, eventReqAttrs );\r\n        }else{\r\n            // We haven't any results\r\n            this.showMessage(\"No results were found.\", true);\r\n            this.reduceParamsOrder = 0;\r\n            this.hideSliderControls();\r\n        }\r\n    }\r\n\r\n    eventsLoadingHandler(){\r\n        let widget = this.widget;\r\n        widget.clearEvents(); // Additional clearing after each loading\r\n        if (this && this.readyState == XMLHttpRequest.DONE ) {\r\n            if(this.status == 200){\r\n                widget.events = JSON.parse(this.responseText);\r\n\r\n                if(widget.events.length){\r\n                    widget.groupEventsByName.call(widget);\r\n\r\n                    widget.eventsGroups.map(function(group, i){\r\n                        if(group.length === 1)\r\n                            widget.publishEvent(group[0]);\r\n                        else\r\n                            widget.publishEventsGroup.call(widget, group, i);\r\n                    });\r\n\r\n                    if (!widget.isListView) widget.initSlider();\r\n                    widget.setEventsCounter();\r\n                    widget.resetReduceParamsOrder();\r\n                    if(widget.hideMessageWithoutDelay)\r\n                        widget.hideMessage();\r\n                    else\r\n                        widget.hideMessageWithDelay(widget.hideMessageDelay);\r\n\r\n                }else{\r\n                    widget.reduceParamsAndReloadEvents.call(widget);\r\n                }\r\n            }\r\n            else if(this.status == 400) {\r\n                widget.reduceParamsAndReloadEvents.call(widget);\r\n                console.log('There was an error 400');\r\n            }\r\n            else {\r\n                widget.reduceParamsAndReloadEvents.call(widget);\r\n                console.log('something else other than 200 was returned');\r\n            }\r\n        }\r\n    }\r\n\r\n    publishEventsGroup(group, index){\r\n        let groupNodeWrapper = document.createElement(\"li\");\r\n        groupNodeWrapper.classList.add(\"event-wrapper\");\r\n        groupNodeWrapper.classList.add(\"event-group-wrapper\");\r\n        /*\r\n        groupNodeWrapper.style.width  = `${this.config.width - this.borderSize * 2}px`;\r\n        groupNodeWrapper.style.height = `${this.widgetContentHeight - this.borderSize * 2}px`;\r\n        */\r\n        groupNodeWrapper.style.width  = `${this.config.width}px`;\r\n        groupNodeWrapper.style.height = `${this.widgetContentHeight}px`;\r\n\r\n        let groupNode = document.createElement(\"ul\");\r\n        groupNode.classList.add(\"event-group\");\r\n        groupNode.classList.add(\"event-group-\" + index);\r\n\r\n        group.map((event)=> {\r\n            this.publishEvent(event, groupNode)\r\n        });\r\n\r\n        groupNodeWrapper.appendChild(groupNode);\r\n        this.eventsRoot.appendChild(groupNodeWrapper);\r\n    }\r\n\r\n    publishEvent(event, parentNode){\r\n        parentNode = parentNode || this.eventsRoot;\r\n        let DOMElement = this.createDOMItem(event);\r\n        parentNode.appendChild(DOMElement);\r\n    }\r\n\r\n    getEventByID(id){\r\n        for(let index in this.events){\r\n            if(this.events.hasOwnProperty(index) && this.events[index].id === id){\r\n                return this.events[index]\r\n            }\r\n        }\r\n    }\r\n\r\n    getImageForEvent(images){\r\n        var width = this.config.width,\r\n            height = this.widgetContentHeight;\r\n\r\n        images.sort(function(a,b) {\r\n            if (a.width < b.width)\r\n                return -1;\r\n            else if (a.width > b.width)\r\n                return 1;\r\n            else\r\n                return 0;\r\n        });\r\n\r\n        var myImg = \"\";\r\n        images.forEach(function(element){\r\n            if(element.width >= width && element.height >= height && !myImg){\r\n                myImg = element.url;\r\n            }\r\n        });\r\n        return myImg;\r\n    }\r\n\r\n    parseEvents(eventsSet){\r\n        if(!eventsSet._embedded){\r\n            if(typeof($widgetModalNoCode) !== \"undefined\"){\r\n                $widgetModalNoCode.modal();\r\n            }\r\n            return [];\r\n        }\r\n        eventsSet = eventsSet._embedded.events;\r\n        var tmpEventSet = [];\r\n        for(var key in eventsSet){\r\n            if(eventsSet.hasOwnProperty(key)){\r\n                let currentEvent = {};\r\n\r\n                currentEvent.id = eventsSet[key].id;\r\n                currentEvent.url = eventsSet[key].url;\r\n                currentEvent.name = eventsSet[key].name;\r\n\r\n                currentEvent.date = {\r\n                    day: eventsSet[key].dates.start.localDate,\r\n                    time: eventsSet[key].dates.start.localTime\r\n                };\r\n\r\n                if(eventsSet[key].hasOwnProperty('_embedded') && eventsSet[key]._embedded.hasOwnProperty('venues')){\r\n                    let venue = eventsSet[key]._embedded.venues[0];\r\n                    if(venue){\r\n                        if(venue.address)\r\n                            currentEvent.address = venue.address;\r\n\r\n                        if(venue.name){\r\n                            if(!currentEvent.address) currentEvent.address = {};\r\n                            currentEvent.address.name = venue.name;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Remove this comment to get categories\r\n                /*if(eventsSet[key]._embedded.hasOwnProperty('categories')){\r\n                 currentEvent.categories = [];\r\n                 let eventCategories = eventsSet[key]._embedded.categories;\r\n                 currentEvent.categories = Object.keys(eventCategories).map(function(category){\r\n                 return eventCategories[category].name\r\n                 });\r\n                 }*/\r\n\r\n                currentEvent.img = this.getImageForEvent(eventsSet[key].images);\r\n\r\n                tmpEventSet.push(currentEvent);\r\n\r\n            }\r\n        }\r\n        return tmpEventSet;\r\n    }\r\n\r\n    makeRequest(handler, url=this.apiUrl, attrs={}, method=\"GET\"){\r\n        attrs = Object.keys(attrs).map(function(key){\r\n            return `${key}=${attrs[key]}`;\r\n        }).join(\"&\");\r\n\r\n        url = [url,attrs].join(\"?\");\r\n\r\n        this.xmlHTTP = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n        if(method == \"POST\") {\r\n            this.xmlHTTP.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\r\n        }\r\n        this.xmlHTTP.widget = this;\r\n        this.xmlHTTP.onreadystatechange = handler;\r\n        this.xmlHTTP.open(method, url, true);\r\n        this.xmlHTTP.send();\r\n    }\r\n\r\n    initPretendedLink(el, url, isBlank){\r\n        if(el && url){\r\n            el.setAttribute('data-url', url);\r\n            el.classList.add(\"event-pretended-link\");\r\n            el.addEventListener('click', function(){\r\n                let url = this.getAttribute('data-url');\r\n                if(url){\r\n                    let win = window.open(url, (isBlank ? '_blank' : '_self'));\r\n                    win.focus();\r\n                }\r\n            });\r\n        }\r\n        return el;\r\n    }\r\n\r\n    createBackgroundImage(event, img) {\r\n        if (!this.isListView) {\r\n            var image = document.createElement(\"span\");\r\n            image.classList.add(\"bg-cover\");\r\n            image.style.backgroundImage = `url('${img}')`;\r\n            event.appendChild(image);\r\n        }\r\n    }\r\n\r\n    addBuyButton(domNode, url) {\r\n        if (this.isListView) {\r\n            let _urlValid = ( this.isUniversePluginInitialized && this.isUniverseUrl(url) ) || ( this.isTMPluginInitialized && this.isAllowedTMEvent(url) );\r\n            if(!_urlValid) url = '';\r\n            let buyBtn = document.createElement(\"a\");\r\n            buyBtn.appendChild(document.createTextNode('BUY NOW'));\r\n            buyBtn.classList.add(\"event-buy-btn\");\r\n            buyBtn.target = '_blank';\r\n            buyBtn.href = url;\r\n            buyBtn.setAttribute('onclick', \"ga('send', 'event', 'DiscoveryClickBuyButton', 'click');\");\r\n            domNode.appendChild(buyBtn);\r\n        }\r\n    }\r\n\r\n    createDOMItem(itemConfig){\r\n        var medWrapper = document.createElement(\"div\");\r\n        medWrapper.classList.add(\"event-content-wraper\");\r\n\r\n        var event = document.createElement(\"li\");\r\n        event.classList.add(\"event-wrapper\");\r\n\r\n        /* event.style.height = `${this.widgetContentHeight - this.borderSize * 2}px`;\r\n        event.style.width  = `${this.config.width - this.borderSize * 2}px`;\r\n        */\r\n\r\n        event.style.height = `${this.widgetContentHeight}px`;\r\n        event.style.width  = `${this.config.width}px`;\r\n\r\n        this.createBackgroundImage(event, itemConfig.img);\r\n\r\n        var nameContent = document.createTextNode(itemConfig.name),\r\n            name =  document.createElement(\"span\");\r\n        name.classList.add(\"event-name\");\r\n        name.appendChild(nameContent);\r\n        this.initPretendedLink(name, itemConfig.url, true);\r\n        name.setAttribute('onclick', `ga('send', 'event', 'DiscoveryClickeventName_theme=${this.config.theme}_width=${this.config.width}_height=${this.config.height}_color_scheme=${this.config.colorscheme}', 'click', '${itemConfig.url}');`);\r\n        /* name.setAttribute('onclick', \"ga('send', 'event', 'DiscoveryClickeventName', 'click', '\" + itemConfig.url + \"');\"); */\r\n        medWrapper.appendChild(name);\r\n\r\n        this.addBuyButton(medWrapper, itemConfig.url);\r\n\r\n        var dateTimeContent = document.createTextNode(this.formatDate(itemConfig.date)),\r\n            dateTime = document.createElement(\"span\");\r\n        dateTime.classList.add(\"event-date\");\r\n        dateTime.appendChild(dateTimeContent);\r\n\r\n        var dateWraper = document.createElement(\"span\");\r\n        dateWraper.classList.add(\"event-date-wraper\");\r\n        dateWraper.appendChild(dateTime);\r\n        medWrapper.appendChild(dateWraper);\r\n\r\n        if(itemConfig.hasOwnProperty(\"address\")){\r\n            var addressWrapper = document.createElement(\"span\");\r\n            addressWrapper.classList.add(\"address-wrapper\");\r\n\r\n            if( itemConfig.address.hasOwnProperty(\"name\") ){\r\n                var addressNameText = document.createTextNode(itemConfig.address.name),\r\n                    addressName =  document.createElement(\"span\");\r\n                addressName.classList.add(\"event-address\");\r\n                addressName.classList.add(\"event-address-name\");\r\n                addressName.appendChild(addressNameText);\r\n                addressWrapper.appendChild(addressName);\r\n            }\r\n\r\n            if( itemConfig.address.hasOwnProperty(\"line1\") ){\r\n                var addressOneText = document.createTextNode(itemConfig.address.line1),\r\n                    addressOne =  document.createElement(\"span\");\r\n                addressOne.classList.add(\"event-address\");\r\n                addressOne.appendChild(addressOneText);\r\n                addressWrapper.appendChild(addressOne);\r\n            }\r\n\r\n            if( itemConfig.address.hasOwnProperty(\"line2\") ){\r\n                var addressTwoText = document.createTextNode(itemConfig.address.line2),\r\n                    addressTwo =  document.createElement(\"span\");\r\n                addressTwo.classList.add(\"event-address\");\r\n                addressTwo.appendChild(addressTwoText);\r\n                addressWrapper.appendChild(addressTwo);\r\n            }\r\n\r\n            medWrapper.appendChild(addressWrapper);\r\n        }\r\n\r\n        if(itemConfig.hasOwnProperty(\"categories\")) {\r\n            var categoriesWrapper = document.createElement(\"span\");\r\n            categoriesWrapper.classList.add(\"category-wrapper\");\r\n\r\n            itemConfig.categories.forEach(function (element) {\r\n                var categoryText = document.createTextNode(element),\r\n                    category = document.createElement(\"span\");\r\n                category.classList.add(\"event-category\");\r\n                category.appendChild(categoryText);\r\n                categoriesWrapper.appendChild(category);\r\n            });\r\n            medWrapper.appendChild(categoriesWrapper);\r\n        }\r\n\r\n        event.appendChild(medWrapper);\r\n\r\n        return event;\r\n    }\r\n\r\n    makeImageUrl(id){\r\n        return `https://app.ticketmaster.com/discovery/v2/events/${id}/images.json`;\r\n    }\r\n\r\n\r\n    /* Config block */\r\n\r\n    decConfig(config){\r\n        return JSON.parse(window.atob(config));\r\n    }\r\n\r\n    encConfig(config){\r\n        return window.btoa(config);\r\n    }\r\n\r\n    toShortISOString(dateObj){\r\n        return dateObj.getFullYear() +\r\n            \"-\" + (dateObj.getMonth() + 1 < 10 ? \"0\"+ (dateObj.getMonth()+ 1): dateObj.getMonth() + 1) +\r\n            \"-\" + (dateObj.getDate() < 10 ? \"0\"+ dateObj.getDate(): dateObj.getDate()) +\r\n            \"T\" + (dateObj.getHours() < 10 ? \"0\"+dateObj.getHours(): dateObj.getHours()) +\r\n            \":\" + (dateObj.getMinutes() < 10 ? \"0\"+dateObj.getMinutes(): dateObj.getMinutes()) +\r\n            \":\" + (dateObj.getSeconds() < 10 ? \"0\"+dateObj.getSeconds(): dateObj.getSeconds()) +\r\n            \"Z\";\r\n    }\r\n\r\n    getDateFromPeriod(period){\r\n\r\n        /*\r\n        var date = new Date(),\r\n            period = period.toLowerCase(),\r\n            firstDay, lastDay;\r\n\r\n        if(period == \"year\" ){\r\n            firstDay = new Date(date.getFullYear(),0,1);\r\n            lastDay = new Date(date.getFullYear(),12,0);\r\n        }\r\n        else if(period == \"month\"){\r\n            firstDay = new Date(date.getFullYear(), date.getMonth(), 1);\r\n            lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);\r\n        }\r\n        else if(period == \"week\"){\r\n            var first = date.getDate() - date.getDay();\r\n            var last = first + 6;\r\n            firstDay = new Date(date.setDate(first));\r\n            lastDay = new Date(date.setDate(last));\r\n        } else {\r\n            firstDay = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n            lastDay = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n        }\r\n        */\r\n\r\n        let firstDay = new Date();\r\n        let lastDay = new Date();\r\n\r\n        if (period != 'week') {\r\n            firstDay = new Date(period);\r\n            lastDay = new Date(period);\r\n        }\r\n\r\n        firstDay.setHours(0);   lastDay.setHours(23);\r\n        firstDay.setMinutes(0); lastDay.setMinutes(59);\r\n        firstDay.setSeconds(0); lastDay.setSeconds(59);\r\n\r\n        return [this.toShortISOString(firstDay), this.toShortISOString(lastDay)];\r\n    }\r\n\r\n}\r\n\r\nclass TabsControls {\r\n\r\n    removeActiveTab() {\r\n        let tabs = document.querySelectorAll('.tb');\r\n        Array.from(tabs).forEach(tab => {\r\n            if (tab.classList.contains(\"active\")) tab.classList.remove(\"active\");\r\n        });\r\n        let tab = document.querySelectorAll('.tab');\r\n        Array.from(tab).forEach(tb => {\r\n            if (tb.classList.contains(\"active\")) tb.classList.remove(\"active\");\r\n        });\r\n    }\r\n\r\n    selActiveTab(activeTab) {\r\n        let nodeList = document.getElementsByClassName('tabs-container');\r\n        nodeList[0].children[activeTab].classList.add('active');\r\n    }\r\n\r\n    constructor() {\r\n        let self = this;\r\n        var tabs = document.querySelectorAll('.tb');\r\n        var tabsList = document.getElementsByClassName('tabs');\r\n        Array.from(tabs).forEach(tab => {\r\n            tab.addEventListener('click', function (e) {\r\n                self.removeActiveTab();\r\n                let index = Array.prototype.indexOf.call(tabsList[0].children, e.target);\r\n                this.classList.add(\"active\");\r\n                self.selActiveTab(index);\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n\r\nclass SelectorControls {\r\n\r\n    constructor(root, selectorClass, selectorContent, attribute, update) {\r\n        if (!root) return;\r\n        this.SelectorRoot = root;\r\n        this.SelectorClass = selectorClass;\r\n        this.SelectorContent = selectorContent;\r\n        this.SelectorContainer = document.createElement(\"div\");\r\n        this.SelectorContainer.classList.add(this.SelectorClass);\r\n        this.SelectorContainer.innerHTML = this.SelectorContent;\r\n        this.SelectorRoot.appendChild(this.SelectorContainer);\r\n\r\n        this.selTitle = this.SelectorContainer.getElementsByTagName(\"span\")[0];\r\n        this.selContent = this.selTitle.nextElementSibling;\r\n\r\n        this.selContent.addEventListener(\"click\",function(e){\r\n            this.parentNode.getElementsByClassName('selector-title')[0].innerHTML = e.target.innerHTML;\r\n            this.parentNode.getElementsByClassName('selector-title')[0].classList.remove('open');\r\n            this.parentNode.getElementsByClassName('selector-content')[0].classList.remove('show');\r\n            if (attribute == 'period') this.parentNode.parentNode.parentNode.parentNode.setAttribute('w-period', e.target.getAttribute('w-period'));\r\n            if (attribute == 'classificationId') this.parentNode.parentNode.parentNode.parentNode.setAttribute('w-classificationId', e.target.getAttribute('w-classificationId'));\r\n            update();\r\n        });\r\n\r\n        this.selTitle.addEventListener(\"click\",function(e){\r\n            this.nextElementSibling.classList.add(\"show\");\r\n            if ( this.classList.contains(\"open\") ) {\r\n                this.classList.remove(\"open\");\r\n                this.nextElementSibling.classList.remove(\"show\");\r\n            }\r\n            else {\r\n                this.classList.add(\"open\");\r\n            }\r\n            this.nextElementSibling.focus();\r\n        },false);\r\n\r\n        this.selContent.addEventListener(\"blur\",function(e){\r\n            var self = this;\r\n            setTimeout(function () {\r\n                self.classList.remove(\"show\");\r\n                self.previousElementSibling.classList.remove(\"open\");\r\n            }, 127);\r\n        },false);\r\n\r\n    }\r\n\r\n}\r\n\r\nclass WeekScheduler {\r\n\r\n    get apiUrl(){ return \"https://app.ticketmaster.com/discovery/v2/events.json\"; }\r\n\r\n    get eventReqAttrs(){\r\n        let attrs = {},\r\n            params = [\r\n                {\r\n                    attr: 'tmapikey',\r\n                    verboseName: 'apikey'\r\n                },\r\n                {\r\n                    attr: 'keyword',\r\n                    verboseName: 'keyword'\r\n                },\r\n                {\r\n                    attr: 'size',\r\n                    verboseName: 'size'\r\n                },\r\n                {\r\n                    attr: 'radius',\r\n                    verboseName: 'radius'\r\n                },\r\n                {\r\n                    attr: 'classificationid',\r\n                    verboseName: 'classificationId'\r\n                },\r\n                {\r\n                    attr: 'attractionid',\r\n                    verboseName: 'attractionId'\r\n                },\r\n                {\r\n                    attr: 'promoterid',\r\n                    verboseName: 'promoterId'\r\n                },\r\n                {\r\n                    attr: 'venueid',\r\n                    verboseName: 'venueId'\r\n                },\r\n                {\r\n                    attr: 'segmentid',\r\n                    verboseName: 'segmentId'\r\n                }\r\n            ];\r\n\r\n        /*\r\n        for(let i in params){\r\n            let item = params[i];\r\n            if(this.isConfigAttrExistAndNotEmpty(item.attr))\r\n                attrs[item.verboseName] = this.config[item.attr];\r\n        }\r\n\r\n        // Only one allowed at the same time\r\n        if(this.config.latlong){\r\n            attrs.latlong = this.config.latlong;\r\n        }else{\r\n            if(this.isConfigAttrExistAndNotEmpty(\"postalcode\"))\r\n                attrs.postalCode = this.config.postalcode;\r\n        }\r\n\r\n        if(this.isConfigAttrExistAndNotEmpty(\"period\")){\r\n            let period = this.getDateFromPeriod(this.config.period);\r\n            attrs.startDateTime = period[0];\r\n            attrs.endDateTime = period[1];\r\n        }\r\n        */\r\n\r\n        // return attrs;\r\n        return {\r\n            \"apikey\": \"5QGCEXAsJowiCI4n1uAwMlCGAcSNAEmG\",\r\n            \"size\": \"25\",\r\n            \"radius\": \"25\",\r\n            \"latlong\": \"34.0390107,-118.2672801\",\r\n            \"startDateTime\": \"2016-06-27T00:00:00Z\",\r\n            \"endDateTime\": \"2016-07-02T23:59:59Z\"\r\n        }\r\n    }\r\n\r\n    addScroll() {\r\n        (function(n,t){function u(n){n.hasOwnProperty(\"data-simple-scrollbar\")||Object.defineProperty(n,\"data-simple-scrollbar\",new SimpleScrollbar(n))}function e(n,i){function f(n){var t=n.pageY-u;u=n.pageY;r(function(){i.el.scrollTop+=t/i.scrollRatio})}function e(){n.classList.remove(\"ss-grabbed\");t.body.classList.remove(\"ss-grabbed\");t.removeEventListener(\"mousemove\",f);t.removeEventListener(\"mouseup\",e)}var u;n.addEventListener(\"mousedown\",function(i){return u=i.pageY,n.classList.add(\"ss-grabbed\"),t.body.classList.add(\"ss-grabbed\"),t.addEventListener(\"mousemove\",f),t.addEventListener(\"mouseup\",e),!1})}function i(n){for(this.target=n,this.bar='<div class=\"ss-scroll\">',this.wrapper=t.createElement(\"div\"),this.wrapper.setAttribute(\"class\",\"ss-wrapper\"),this.el=t.createElement(\"div\"),this.el.setAttribute(\"class\",\"ss-content\"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper);this.target.insertAdjacentHTML(\"beforeend\",this.bar);this.bar=this.target.lastChild;e(this.bar,this);this.moveBar();this.el.addEventListener(\"scroll\",this.moveBar.bind(this));this.el.addEventListener(\"mouseenter\",this.moveBar.bind(this));this.target.classList.add(\"ss-container\")}function f(){for(var i=t.querySelectorAll(\"*[ss-container]\"),n=0;n<i.length;n++)u(i[n])}var r=n.requestAnimationFrame||n.setImmediate||function(n){return setTimeout(n,0)};i.prototype={moveBar:function(){var t=this.el.scrollHeight,i=this.el.clientHeight,n=this;this.scrollRatio=i/t;r(function(){n.bar.style.cssText=\"height:\"+i/t*100+\"%; top:\"+n.el.scrollTop/t*100+\"%;right:-\"+(n.target.clientWidth-n.bar.clientWidth)+\"px;\"})}};t.addEventListener(\"DOMContentLoaded\",f);i.initEl=u;i.initAll=f;n.SimpleScrollbar=i})(window,document)\r\n        var scrollRoot = document.querySelectorAll(\".ss\");\r\n        var maxL = scrollRoot.length;\r\n        for (let ml = 0; ml < maxL; ml++) {\r\n            console.log(scrollRoot[ml]);\r\n            SimpleScrollbar.initEl(scrollRoot[ml]);\r\n        }\r\n    }\r\n\r\n    getJSON(handler, url=this.apiUrl, attrs={}, method=\"GET\"){\r\n        attrs = Object.keys(attrs).map(function(key){\r\n            return `${key}=${attrs[key]}`;\r\n        }).join(\"&\");\r\n\r\n        url = [url,attrs].join(\"?\");\r\n\r\n        this.xmlHTTP = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n        if(method == \"POST\") {\r\n            this.xmlHTTP.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\r\n        }\r\n        this.xmlHTTP.widget = this;\r\n        this.xmlHTTP.onreadystatechange = handler;\r\n        this.xmlHTTP.open(method, url, true);\r\n        this.xmlHTTP.send();\r\n    }\r\n\r\n    formatDate(date) {\r\n        var result = '';\r\n        if(!date.day) return result; // Day is required\r\n\r\n        function LZ(x) {\r\n            return (x < 0 || x > 9 ? \"\" : \"0\") + x\r\n        }\r\n        var MONTH_NAMES = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],\r\n            DAY_NAMES = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\r\n            dayArray = date.day.split('-'),\r\n            d = parseInt(dayArray[2]),\r\n            M = parseInt(dayArray[1]);\r\n\r\n        var E = new Date(date.day).getDay();\r\n        result = DAY_NAMES[E] + ', ' + MONTH_NAMES[M - 1] + ' ' + d + ', ' + dayArray[0];\r\n\r\n        if(!date.time) return result;\r\n\r\n        var timeArray = date.time.split(':'),\r\n            H = parseInt(timeArray[0]),\r\n            m = timeArray[1],\r\n            a = \"AM\";\r\n\r\n        if (H > 11) a = \"PM\";\r\n        if (H == 0) {\r\n            H = 12;\r\n        } else if (H > 12) {\r\n            H = H - 12;\r\n        }\r\n\r\n        return result + ' ' + LZ(H) + ':' + m + ' ' + a;\r\n    }\r\n\r\n    getWeekEventsHandler() {\r\n        let widget = this.widget;\r\n        let events;\r\n        let place;\r\n        let address;\r\n        let weekEvents = [];\r\n        let eventDate;\r\n        if (this && this.readyState == XMLHttpRequest.DONE) {\r\n            if (this.status == 200) {\r\n                events = JSON.parse(this.responseText);\r\n                // console.log(events._embedded.events);\r\n                events._embedded.events.forEach(function (item) {\r\n                    if (item._embedded.venues != undefined) place = item._embedded.venues[0].name;\r\n                    if (item._embedded.venues != undefined) address = item._embedded.venues[0].address.line1;\r\n\r\n                    let imgWidth;\r\n                    let index;\r\n                    item.images.forEach(function(img, i) {\r\n                        if (i == 0) imgWidth = img.width;\r\n                        if (imgWidth > img.width) {\r\n                            imgWidth = img.width;\r\n                            index = i;\r\n                        }\r\n                    });\r\n\r\n                    weekEvents.push({\r\n                        'name': item.name,\r\n                        'date': item.dates.start.localDate,\r\n                        'time': item.dates.start.localTime,\r\n                        'datetime': widget.formatDate({day: item.dates.start.localDate, time: item.dates.start.localTime}),\r\n                        'place': place + ', ' + address,\r\n                        'url': item.url,\r\n                        'img': item.images[index].url\r\n                    });\r\n                });\r\n\r\n                // console.log(weekEvents);\r\n\r\n                var current = new Date();\r\n                var weekstart = current.getDate() - current.getDay();\r\n                var sunday = new Date(current.setDate(weekstart));\r\n                let currentSunday = sunday;\r\n                let daysDiv = '';\r\n                let currentDayClass = '';\r\n                let dayOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n                let now = new Date();\r\n                for (let i = 0; i <= 6; i++) {\r\n                    let day = new Date(new Date(currentSunday).getTime() + (i * 24 * 60 * 60 * 1000));\r\n                    if (day.getDay() == now.getDay()) currentDayClass = ' active'; else currentDayClass = '';\r\n                    daysDiv += `<span class=\"d${currentDayClass}\">${dayOfWeek[i]} <span class=\"num\">${day.getDate()}</span></span>`;\r\n                }\r\n                let zeroLead = '';\r\n                let timeTmp = '';\r\n                let monthTmp = '';\r\n                let timeDiv = '<div class=\"ss time-wrapper\"><div class=\"ss-container time-holder\">';\r\n                for (let i = 13; i <= 23; i++) {\r\n                    if (i <= 9) {\r\n                        zeroLead = '0';\r\n                        timeTmp = '0' + i + \":00:00\";\r\n                    } else {\r\n                        zeroLead = '';\r\n                        timeTmp = i + \":00:00\"\r\n                    }\r\n                    timeDiv += `<div class=\"t t-${i}\"><span class=\"tl\">${zeroLead}${i} : 00</span>`;\r\n                    for (let d = 0; d <= 6; d++) {\r\n                        let dayCount = 0;\r\n                        let dayTmp = new Date(new Date(currentSunday).getTime() + (d * 24 * 60 * 60 * 1000));\r\n                        if (parseInt(dayTmp.getMonth() + 1) <= 9) monthTmp = '0' + parseInt(dayTmp.getMonth() + 1); else monthTmp = dayTmp.getMonth() + 1;\r\n                        let dateTmp = dayTmp.getFullYear() + '-' + monthTmp + '-' + dayTmp.getDate();\r\n                        timeDiv += `<div class=\"d d-${d}\" w-date=\"${dateTmp}\" w-time=\"${zeroLead}${i}:00:00\">`;\r\n\r\n                        for (let e = 0, l = weekEvents.length; e < l; ++e) {\r\n                            if (weekEvents[e].date == dateTmp && weekEvents[e].time.substring(0,2) == timeTmp.substring(0,2)) {\r\n                                if (dayCount == 0) {\r\n                                    timeDiv += '<span class=\"round\"></span>';\r\n                                    if (weekEvents[e].time.substring(0,2) < 18) {\r\n                                        timeDiv += '<span class=\"tail\"></span>';\r\n                                        timeDiv += '<div class=\"popup ss\" tabindex=\"-1\">';\r\n                                        timeDiv += '<div class=\"ss-container\">';\r\n                                    }\r\n                                    else {\r\n                                        timeDiv += '<span class=\"tail-up\"></span>';\r\n                                        timeDiv += '<div class=\"popup-up ss\" tabindex=\"-1\">';\r\n                                        timeDiv += '<div class=\"ss-container\">';\r\n                                    }\r\n                                    dayCount = 1;\r\n                                }\r\n                                timeDiv += '<span class=\"event\">';\r\n                                timeDiv += '<span class=\"event-holder\">';\r\n                                timeDiv += '<a href=\"' + weekEvents[e].url + '\" target=\"_blank\">';\r\n                                timeDiv += '<span class=\"img\" style=\"background: url(' + weekEvents[e].img + ') center center no-repeat\"></span>';\r\n                                timeDiv += '<span class=\"name\">' + weekEvents[e].name + '</span>';\r\n                                timeDiv += '</a>';\r\n                                timeDiv += '<span class=\"date\">' + weekEvents[e].datetime + '</span>';\r\n                                timeDiv += '<span class=\"place\">' + weekEvents[e].place + '</span>';\r\n                                timeDiv += '</span>';\r\n                                timeDiv += '</span>';\r\n                            }\r\n                        }\r\n                        if (dayCount == 1) timeDiv += '</div></div>';\r\n                        timeDiv += '</div>';\r\n                    }\r\n                    timeDiv += `</div>`;\r\n                }\r\n                timeDiv += `</div></div>`;\r\n                daysDiv += timeDiv;\r\n                widget.weekdaysRootContainer.innerHTML = daysDiv;\r\n                widget.addScroll();\r\n            }\r\n            else if (this.status == 400) {\r\n                console.log('There was an error 400');\r\n            }\r\n            else {\r\n                console.log('something else other than 200 was returned');\r\n            }\r\n        }\r\n\r\n        var rounds = document.querySelectorAll(\"span.round\");\r\n        for (var x = 0; x < rounds.length; x++) {\r\n            rounds[x].addEventListener(\"click\", function (e) {\r\n                document.querySelectorAll(\"#weekSheduler .ss-wrapper\")[0].style.overflow = \"visible\";\r\n                document.querySelectorAll(\"#weekSheduler .ss-content\")[0].style.overflow = \"visible\";\r\n                this.nextElementSibling.classList.add(\"show\");\r\n                this.nextElementSibling.nextElementSibling.classList.add(\"show\");\r\n                this.nextElementSibling.nextElementSibling.focus();\r\n            }, false);\r\n        }\r\n\r\n        var popups = document.querySelectorAll(\".popup, .popup-up\");\r\n        for (var y = 0; y < popups.length; y++) {\r\n            popups[y].addEventListener(\"blur\", function (e) {\r\n                let self = this;\r\n                document.querySelectorAll(\"#weekSheduler .ss-wrapper\")[0].style.overflow = \"hidden\";\r\n                document.querySelectorAll(\"#weekSheduler .ss-content\")[0].style.overflow = \"auto\";\r\n                setTimeout(function () {\r\n                    self.previousElementSibling.classList.remove(\"show\");\r\n                    self.classList.remove(\"show\");\r\n                }, 127);\r\n            }, false);\r\n        }\r\n    }\r\n\r\n    startMonth() {\r\n        this.getJSON( this.getWeekEventsHandler, this.apiUrl, this.eventReqAttrs );\r\n    }\r\n\r\n    constructor(root) {\r\n        if (!root) return;\r\n        this.weekSchedulerRoot = root;\r\n        this.weekdaysRootContainer = document.createElement(\"div\");\r\n        this.weekdaysRootContainer.classList.add(\"days\");\r\n        this.startMonth();\r\n        this.weekSchedulerRoot.appendChild(this.weekdaysRootContainer);\r\n    }\r\n}\r\n\r\nlet widgetsCalendar = [];\r\n(function () {\r\n    let widgetContainers = document.querySelectorAll(\"div[w-type='calendar']\");\r\n    for (let i = 0; i < widgetContainers.length; ++i) {\r\n        widgetsCalendar.push(new TicketmasterCalendarWidget(widgetContainers[i]));\r\n    }\r\n\r\n})();\r\n\r\nlet controls = new TabsControls;\r\nlet weekScheduler = new WeekScheduler(document.getElementById('weekSheduler'));\r\n"]}