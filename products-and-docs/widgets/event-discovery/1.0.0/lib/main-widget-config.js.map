{"version":3,"sources":["../src/main-widget-config.es6"],"names":[],"mappings":"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","file":"main-widget-config.js","sourcesContent":["(function(){\r\n\r\n  function getHeightByTheme(theme){\r\n    return (theme === 'simple' ? 286 : 339);\r\n  }\r\n\r\n  function getBorderByTheme(theme) {\r\n    switch (theme) {\r\n      case 'simple':\r\n        return 0;\r\n        break;\r\n      default:\r\n        return 2;\r\n    }\r\n  }\r\n  \r\n  let widget = widgetsEventDiscovery[0],\r\n    themeConfig = {\r\n      sizes: {\r\n        s: {\r\n          width: 160,\r\n          height: 300,\r\n          layout: 'horizontal'\r\n        },\r\n        m: {\r\n          width: 160,\r\n          height: 300,\r\n          layout: 'horizontal'\r\n        },\r\n        l: {\r\n          width: 160,\r\n          height: 300,\r\n          layout: 'horizontal'\r\n        },\r\n        xl: {\r\n          width: 160,\r\n          height: 300,\r\n          layout: 'horizontal'\r\n        },\r\n        xxl: {\r\n          width: 300,\r\n          height: 600,\r\n          layout: 'vertical'\r\n        },\r\n        custom: {\r\n          width: 350,\r\n          height: 600,\r\n          layout: 'vertical'\r\n        }\r\n      },\r\n      initSliderSize: {\r\n        width: 350,\r\n        height: 600,\r\n        maxWidth: 500,\r\n        minWidth: 350\r\n      }      \r\n    },\r\n    isPostalCodeChanged = false;\r\n\r\n  var $widthController = $('#w-width').slider({\r\n      tooltip: 'always',\r\n      handle: 'square'\r\n    }),\r\n    $borderRadiusController = $('#w-borderradius').slider({\r\n      tooltip: 'always',\r\n      handle: 'square'\r\n    }),\r\n    $colorSchemeSelector = $('.widget__color_scheme_control');\r\n\r\n  $('#js_styling_nav_tab').on('shown.bs.tab', function (e) {\r\n    $widthController.slider('relayout');\r\n    $borderRadiusController.slider('relayout');\r\n  });\r\n\r\n  var changeState = function(event){\r\n    if(!event.target.name){\r\n      return;\r\n    }\r\n    let widgetNode = document.querySelector(\"div[w-tmapikey]\"),\r\n        targetValue = event.target.value,\r\n        targetName = event.target.name,\r\n        $tabButtons = $('.js-tab-buttons');\r\n\r\n    if(targetName === \"w-postalcode\"){\r\n      widgetNode.setAttribute('w-country', '');\r\n      isPostalCodeChanged = true;\r\n    }\r\n\r\n    if(targetName === \"w-theme\"){\r\n      if(targetValue === 'simple'){\r\n        $colorSchemeSelector.hide();\r\n      }else{\r\n        $colorSchemeSelector.show();\r\n      }\r\n\r\n      if(widgetNode.getAttribute('w-layout') === 'horizontal'){\r\n        widgetNode.setAttribute('w-height', getHeightByTheme(targetValue));\r\n      }\r\n      widgetNode.setAttribute('w-border', getBorderByTheme(targetValue));\r\n    }\r\n\r\n    if(targetName === \"w-layout\"){\r\n      let sizeConfig = themeConfig.initSliderSize;\r\n      if(targetValue === 'horizontal'){\r\n        sizeConfig = {\r\n          width: 620,\r\n          height: getHeightByTheme(widgetNode.getAttribute('w-theme')),\r\n          maxWidth: 900,\r\n          minWidth: 620\r\n        };\r\n      }\r\n\r\n      $widthController.slider({\r\n          setValue: sizeConfig.width ,\r\n          max: sizeConfig.maxWidth,\r\n          min: sizeConfig.minWidth\r\n        })\r\n        .slider('refresh');\r\n\r\n      widgetNode.setAttribute('w-width', sizeConfig.width);\r\n      widgetNode.setAttribute('w-height', sizeConfig.height);\r\n    }\r\n\r\n    //Check fixed sizes for 'simple' theme\r\n    if(targetName === \"w-proportion\") {\r\n      let widthSlider = $('.js_widget_width_slider');\r\n      let sizeConfig = {\r\n        width: themeConfig.sizes[targetValue].width,\r\n        height: themeConfig.sizes[targetValue].height,\r\n        maxWidth: 600,\r\n        minWidth: 350\r\n      };\r\n\r\n      //set layout\r\n      widgetNode.setAttribute('w-layout', themeConfig.sizes[targetValue].layout);\r\n\r\n      if (targetValue !== 'custom') {\r\n        $tabButtons.slideUp(\"fast\");\r\n        widthSlider.slideUp(\"fast\");\r\n      }else{\r\n        $tabButtons.slideDown(\"fast\");\r\n        widthSlider.slideDown(\"fast\");\r\n        $('input:radio[name=\"w-layout\"][value=\"vertical\"]',$tabButtons).prop('checked', true);\r\n\r\n        sizeConfig = { //default size\r\n          width: themeConfig.initSliderSize.width,  //350\r\n          height: themeConfig.initSliderSize.height,  //600\r\n          maxWidth: themeConfig.initSliderSize.maxWidth,  //500\r\n          minWidth: themeConfig.initSliderSize.minWidth // 350\r\n        };\r\n        $widthController.slider({\r\n            setValue: sizeConfig.width,\r\n            max: sizeConfig.maxWidth,\r\n            min: sizeConfig.minWidth\r\n          })\r\n          .slider('refresh');\r\n\r\n      }\r\n\r\n      widgetNode.setAttribute('w-width', sizeConfig.width);\r\n      widgetNode.setAttribute('w-height', sizeConfig.height);\r\n    }\r\n\r\n    widgetNode.setAttribute(event.target.name, event.target.value);\r\n    widget.update();\r\n  };\r\n\r\n  var resetWidget = function(configForm) {\r\n    let widgetNode = document.querySelector(\"div[w-tmapikey]\"),\r\n      height = 600,\r\n      theme,\r\n      layout;\r\n    const widthSlider = $('.js_widget_width_slider'),\r\n      $tabButtons = $('.js-tab-buttons');\r\n\r\n    configForm.find(\"input[type='text'], input[type='number']\").each(function(){\r\n      let $self = $(this),\r\n        data = $self.data(),\r\n        value = data.defaultValue;\r\n\r\n      if(data.sliderValue){\r\n        value = data.sliderValue;\r\n        $self.slider({\r\n          setValue: value,\r\n          max: data.sliderMax,\r\n          min: data.sliderMin\r\n        })\r\n        .slider('refresh');\r\n      }else{\r\n        $self.val(value);\r\n      }\r\n\r\n      widgetNode.setAttribute($self.attr('name'), value);\r\n    });\r\n\r\n    configForm.find(\"input[type='radio']\").each(function(){\r\n      var $self = $(this);\r\n      if($self.data('is-checked')){\r\n        let name = $self.attr('name'),\r\n            val = $self.val();\r\n        if(name === 'w-theme'){\r\n          theme = val;\r\n        }else if(name === 'w-layout'){\r\n          layout = val;\r\n        }else if(name === 'w-proportion'){\r\n          $tabButtons.slideDown(\"fast\");\r\n          widthSlider.slideDown(\"fast\");\r\n        }\r\n        $self.prop('checked', true);\r\n        widgetNode.setAttribute($self.attr('name'), val);\r\n      }\r\n    });\r\n\r\n    if(layout === 'horizontal'){\r\n      height = getHeightByTheme(theme);\r\n    }\r\n    widgetNode.setAttribute('w-height', height);\r\n    widgetNode.setAttribute('w-border', 0);\r\n\r\n    $('.country-select .js_custom_select').removeClass('custom_select-opened');//reset custom select\r\n    widget.onLoadCoordinate();\r\n    widget.update();\r\n  };\r\n\r\n  var $configForm = $(\".main-widget-config-form\"),\r\n      $widgetModal = $('#js_widget_modal'),\r\n      $widgetModalNoCode = $('#js_widget_modal_no_code');\r\n\r\n  $configForm.on(\"change\", changeState);\r\n  // Mobile devices. Force 'change' by 'Go' press\r\n  $configForm.on(\"submit\", function (e) {\r\n    $configForm.find('input:focus').trigger('blur');\r\n    e.preventDefault();\r\n  });\r\n\r\n  $configForm.find(\"input[type='text'], input[type='number']\").each(function(){\r\n    var $self = $(this);\r\n    $self.data('default-value', $self.val());\r\n  });\r\n\r\n  $configForm.find(\"input[type='radio']\").each(function(){\r\n    var $self = $(this);\r\n    if($self.is(':checked'))\r\n      $self.data('is-checked', 'checked');\r\n  });\r\n\r\n  $('.js_get_widget_code').on('click', function(){\r\n    var codeCont = document.querySelector(\".language-html.widget_dialog__code\");\r\n\r\n    var htmlCode = document.createElement(\"div\");\r\n    for(var key in widget.config){\r\n      if(key !== 'latlong'){\r\n        htmlCode.setAttribute(\"w-\"+key,widget.config[key]);\r\n      }\r\n    }\r\n    var tmp = document.createElement(\"div\");\r\n    tmp.appendChild(htmlCode);\r\n    codeCont.textContent = tmp.innerHTML;\r\n    $widgetModal.modal();\r\n  });\r\n\r\n\r\n  $('.js_reset_widget').on('click', function(){\r\n    resetWidget($configForm);\r\n  });\r\n\r\n  $('#js_widget_modal__close').on('click', function(){\r\n    $widgetModal.modal('hide');\r\n  });\r\n\r\n  $('#js_widget_modal_no_code__close').on('click', function(){\r\n    $widgetModalNoCode.modal('hide');\r\n  });\r\n\r\n  $('.js_widget__number').on('change', function (e) {\r\n    let $self = $(this),\r\n      val = $self.val().trim(),\r\n      max = parseInt($self.attr('max')),\r\n      min = parseInt($self.attr('min')),\r\n      required = !!$self.attr('required'),\r\n      regNumberOrEmpty = /^(\\s*|\\d+)$/,\r\n      errorCssClass = 'error';\r\n\r\n    // if(val === '') $self.val('');\r\n\r\n    if((max && val > max) || (min && val < min) || (required && val === '') || (!regNumberOrEmpty.test(val))){\r\n      $self.addClass(errorCssClass);\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      }else{\r\n      $self.removeClass(errorCssClass);\r\n    }\r\n  });\r\n\r\n  widget.onLoadCoordinate = function (results, countryShortName = '') {\r\n    widget.config['country'] = countryShortName;\r\n    if(isPostalCodeChanged){\r\n      isPostalCodeChanged = false;\r\n\r\n      let $countrySelect = $('#w-country'),\r\n        $ul = $(\".js_widget_custom__list\"),\r\n        options = \"<option selected value=''>All</option>\";\r\n\r\n      $countrySelect.html('');\r\n      $ul.html(''); //clear custom select list\r\n      $countrySelect.prop('disabled', !results);\r\n      if(results){\r\n        $countrySelect.prop('disabled', !results.length);\r\n        options = '';\r\n        for(let i in results){\r\n          let result = results[i];\r\n          if(result.address_components){\r\n            let country = result.address_components[result.address_components.length - 1];\r\n            if(country){\r\n              let isSelected = country.short_name === countryShortName ? 'selected' : '';\r\n              options += `<option ${isSelected} value=\"${country.short_name}\">${country.long_name}</option>`;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      $countrySelect.append(options);\r\n      addCustomList($ul, '#w-country', countryShortName);\r\n    }\r\n  };\r\n\r\n  function addCustomList(listWrapperElement, listWrapperId, activeVal) {\r\n    var $listOption = $(listWrapperId).find('option'),//update list\r\n        $placeholder = $(\".country-select\").find(\".custom_select__placeholder\"),\r\n        $ul = listWrapperElement;\r\n\r\n    $placeholder.val( $listOption.html() );\r\n\r\n    $listOption.each(function () {\r\n      var data = {\r\n        value: $(this).val()\r\n      };\r\n      $ul.append(`<li class=\"custom_select__item ${activeVal === data.value ? 'custom_select__item-active' : ''}\" data-value=\"${data.value}\">${$(this).text()}</li>`)\r\n    });\r\n  }\r\n\r\n})();"]}