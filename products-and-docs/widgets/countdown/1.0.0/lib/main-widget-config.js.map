{"version":3,"sources":["../src/main-widget-config.es6"],"names":[],"mappings":";;AAAA,CAAC,aAAK;;AAEJ,MAAI,SAAS,iBAAiB,CAAjB,CAAb;AACA,MAAI,cAAc;AAChB,sBAAkB;AACd,aAAO;AACL,WAAG;AACD,iBAAO,GADN;AAED,kBAAQ,GAFP;AAGD,kBAAQ;AAHP,SADE;AAML,WAAG;AACD,iBAAO,GADN;AAED,kBAAQ,GAFP;AAGD,kBAAQ;AAHP,SANE;AAWL,WAAG;AACD,iBAAO,GADN;AAED,kBAAQ,GAFP;AAGD,kBAAQ;AAHP,SAXE;AAgBL,YAAI;AACF,iBAAO,GADL;AAEF,kBAAQ,EAFN;AAGF,kBAAQ;AAHN,SAhBC;AAqBL,aAAK;AACH,iBAAO,GADJ;AAEH,kBAAQ,GAFL;AAGH,kBAAQ;AAHL,SArBA;AA0BL,gBAAQ;AACN,iBAAO,GADD;AAEN,kBAAQ,GAFF;AAGN,kBAAQ;AAHF;AA1BH,OADO;AAiCd,sBAAgB;AACd,eAAO,GADO;AAEd,gBAAQ,GAFM;AAGd,kBAAU,GAHI;AAId,kBAAU;AAJI;AAjCF;AADF,GAAlB;;;;;;;;;;;;;;;;AAyDA,MAAI,mBAAmB,EAAE,UAAF,EAAc,MAAd,CAAqB;AAC1C,aAAS,QADiC;AAE1C,YAAQ;AAFkC,GAArB,CAAvB;MAIA,0BAA0B,EAAE,iBAAF,EAAqB,MAArB,CAA4B;AACpD,aAAS,QAD2C;AAEpD,YAAQ;AAF4C,GAA5B,CAJ1B;MAQA,iBAAiB,EAAE,qBAAF,CARjB;MASA,aAAa,SAAS,aAAT,CAAuB,iBAAvB,CATb;MAUA,cAAc,EAAE,iBAAF,CAVd;MAWA,aAAa,EAAE,gBAAF,CAXb;;;;;;;;;;AAsBA,MAAI,cAAc,EAAE,0BAAF,CAAlB;MACE,eAAe,EAAE,kBAAF,CADjB;MAEE,qBAAqB,EAAE,0BAAF,CAFvB;;;AAKA,MAAI,UAAU,EAAE,MAAF,CAAd;MACI,mBAAmB,EAAE,2BAAF,CADvB;MAEI,eAAe,EAAE,eAAF,CAFnB;MAGI,aAAa,CAHjB;MAII,aAAa,CAJjB;MAKI,eAAe,IALnB;MAMI,mBAAmB,EANvB;;;;AAUA,WAAS,SAAT,GAAoB;;AAElB,QAAI,SAAU,iBAAiB,GAAjB,CAAqB,KAArB,IAA4B,CAA7B,GAAkC,SAAS,iBAAiB,GAAjB,CAAqB,KAArB,CAAT,CAAlC,GAA0E,CAAvF;AACA,QAAI,eAAe,EAAE,UAAF,EAAc,MAAd,K,sBAA+C,CAA/C,G,iBAAoE,EAAvF;AACA,QAAI,WAAW,aAAa,MAAb,GAAsB,GAAtB,GAA4B,aAAa,MAAb,EAA5B,GAAoD,iBAAiB,MAAjB,EAApD,GAAgF,MAAhF,GAAyF,YAAxG;AACA,QAAI,WAAW,aAAa,MAAb,GAAsB,GAAtB,GAA4B,YAA3C;;AAEA,qBAAiB,IAAjB,CAAsB,UAAtB,EAAkC,QAAlC,EAA4C,IAA5C,CAAiD,UAAjD,EAA4D,QAA5D;;AAEA,iBAAa,WAAW,gBAAxB;AACA,iBAAa,WAAW,iBAAiB,MAAjB,EAAX,GAAuC,gBAApD;AACD;;;;;AAKD,WAAS,YAAT,GAAuB;AACrB,QAAI,aAAa,OAAO,UAAxB;AACA,QAAI,IAAI,CAAR;AACA,aAAS,YAAT,GAAwB;;AAEtB,UAAI,QAAQ,SAAR,MAAuB,UAAvB,IAAqC,QAAQ,SAAR,KAAsB,UAA/D,EAA2E;AACzE,YAAI,iBAAiB,MAAjB,KAA4B,aAAa,MAAb,EAA5B,IAAqD,cAAc,YAAvE,EAAqF;;AAEnF;;AAEA;AACD;AACF;AACD;AACD;AACD,QAAG,MAAM,CAAT,EAAY;;AAEZ,eAAW,YAAM;AACf,UAAI,aAAa,YAAb,IAA6B,iBAAiB,MAAjB,KAA4B,aAAa,MAAb,EAA7D,EAAoF;AAClF;AACA;AACD;AACD,UAAG,iBAAiB,MAAjB,KAA4B,aAAa,MAAb,EAA5B,IAAqD,cAAc,YAAtE,EAAoF;AAClF,YAAI,aAAa,YAAjB,EAA+B;AAC7B;AACD;AACD;AACD;AACF,KAXD,EAWG,GAXH;AAaD;;AAED,UAAQ,EAAR,CAAW,eAAX,EAA4B,YAA5B;;;;;AAKA,WAAS,yBAAT,GAAoC;AAClC,qBAAiB,GAAjB,CAAqB,YAArB,EAAmC,CAAnC;AACD;;;;AAID,WAAS,aAAT,GAAwB;AACtB,QAAI,MAAM,QAAQ,SAAR,EAAV;;AAEA,QAAI,OAAO,iBAAiB,IAAjB,CAAsB,UAAtB,CAAP,IAA4C,OAAO,iBAAiB,IAAjB,CAAsB,UAAtB,CAAvD,EAA0F;;AAExF,UAAI,aAAa,QAAQ,SAAR,KAAsB,iBAAiB,IAAjB,CAAsB,UAAtB,CAAvC;;AAEA,uBAAiB,GAAjB,CAAqB,YAArB,EAAmC,UAAnC;;AAED,KAND,MAMM,IAAI,OAAO,iBAAiB,IAAjB,CAAsB,UAAtB,CAAX,EAA8C;;AAElD,yBAAiB,GAAjB,CAAqB,YAArB,EAAkC,CAAlC;;AAED,OAJK,MAIA,IAAI,MAAM,iBAAiB,IAAjB,CAAsB,UAAtB,CAAV,EAA6C;;AAEjD,2BAAiB,GAAjB,CAAqB,YAArB,EAAmC,iBAAiB,IAAjB,CAAsB,UAAtB,IAAkC,iBAAiB,IAAjB,CAAsB,UAAtB,CAAlC,GAAoE,IAAvG;AACD;AACF;;AAED,MAAI,gBAAgB,SAAhB,aAAgB,CAAU,OAAV,EAAmB;AACrC,QAAI,UAAU,QAAQ,OAAR,IAAmB,eAAe,OAAf,CAAuB,YAAvB,CAAjC;;AAEA,QAAG,YAAY,IAAf,EAAqB;AAAA,UACd,WADc,GACuB,OADvB,CACd,WADc;AAAA,UACD,WADC,GACuB,OADvB,CACD,UADC;AAAA,UACY,OADZ,GACuB,OADvB,CACY,MADZ;;AAEnB,kBACG,IADH,CACQ,OADR,EACiB,OADjB,EAEG,IAFH,CAEQ,YAFR,EAEsB,OAFtB,EAGG,GAHH,CAGO,OAHP;AAIA,kBAAW,YAAX,CAAwB,cAAxB,EAAwC,OAAxC;AACA,cAAO,MAAP;AACD;AACF,GAZD;;AAcA,MAAI,cAAc,SAAd,WAAc,CAAS,KAAT,EAAe;AAC/B,QAAG,CAAC,MAAM,MAAN,CAAa,IAAjB,EAAsB;AACpB;AACD;AACD,QAAM,cAAc,MAAM,MAAN,CAAa,KAAjC;QACM,aAAa,MAAM,MAAN,CAAa,IADhC;;AAGA,QAAG,eAAe,SAAlB,EAA6B;AAC3B,UAAI,cAAc,EAAE,yBAAF,CAAlB;UACI,yBAAyB,gBAD7B;UAEI,kBAAkB,EAAE,mBAAF,EAAuB,sBAAvB,CAFtB;UAGI,iBAAiB,EAAE,0BAAF,CAHrB;;AAMA,UAAG,gBAAgB,WAAnB,EAA+B;AAC7B,mBAAW,OAAX;AACA,oBAAY,OAAZ,CAAoB,MAApB;AACA,gCAAwB,MAAxB,CAA+B,UAA/B,EAA2C,CAA3C;AACA,mBAAW,YAAX,CAAwB,gBAAxB,EAA0C,CAA1C;AACA,uBAAe,OAAf,CAAuB,MAAvB;AACA,+BAAuB,GAAvB,CAA2B;AACzB,iBAAO;AADkB,SAA3B;AAGA,wBAAgB,GAAhB,CAAoB;AAClB,iBAAO;AADW,SAApB;AAGA,mBAAW,YAAX,CAAwB,UAAxB,EAAoC,GAApC;AACD,OAbD,MAaM;AACJ,YAAI,gBAAgB;AACd,cAAK,WAAW,YAAX,CAAwB,MAAxB;AADS,SAApB;AAGA,oBAAY,WAAZ,EAA0B,aAA1B;;AAEA,mBAAW,SAAX,CAAqB,MAArB;AACA,oBAAY,SAAZ,CAAsB,MAAtB;AACA,uBAAe,SAAf,CAAyB,MAAzB;AACA,gCAAwB,MAAxB,CAA+B,UAA/B,EAA2C,CAA3C;AACA,mBAAW,YAAX,CAAwB,gBAAxB,EAA0C,CAA1C;AACA,+BAAuB,GAAvB,CAA2B;AACzB,iBAAO;AADkB,SAA3B;AAGD;AAEF;;;;;;;;;;;AAWD,QAAG,eAAe,UAAlB,EAA6B;AAC3B,UAAI,aAAa,YAAY,gBAAZ,CAA6B,cAA9C;;AAEA,UAAG,gBAAgB,YAAnB,EAAgC;AAC9B,qBAAa;AACX,iBAAO,GADI;;AAGX,kBAAQ,GAHG;AAIX,oBAAU,GAJC;AAKX,oBAAU;AALC,SAAb;AAOD;;AAED,uBAAiB,MAAjB,CAAwB;AACpB,kBAAU,WAAW,KADD;AAEpB,aAAK,WAAW,QAFI;AAGpB,aAAK,WAAW;AAHI,OAAxB,EAKG,MALH,CAKU,SALV;;AAOA,iBAAW,YAAX,CAAwB,SAAxB,EAAmC,WAAW,KAA9C;AACA,iBAAW,YAAX,CAAwB,UAAxB,EAAoC,WAAW,MAA/C;AACD;;;AAGD,QAAG,eAAe,cAAlB,EAAkC;AAChC,UAAI,eAAc,EAAE,yBAAF,CAAlB,C;AACA,UAAI,cAAa;AACf,eAAO,YAAY,gBAAZ,CAA6B,KAA7B,CAAmC,WAAnC,EAAgD,KADxC;AAEf,gBAAQ,YAAY,gBAAZ,CAA6B,KAA7B,CAAmC,WAAnC,EAAgD,MAFzC;AAGf,kBAAU,GAHK;AAIf,kBAAU;AAJK,OAAjB;;;AAQA,iBAAW,YAAX,CAAwB,UAAxB,EAAoC,YAAY,gBAAZ,CAA6B,KAA7B,CAAmC,WAAnC,EAAgD,MAApF;;AAEA,UAAI,gBAAgB,QAApB,EAA8B;AAC5B,oBAAY,OAAZ,CAAoB,MAApB;AACA,qBAAY,OAAZ,CAAoB,MAApB;AACD,OAHD,MAGK;AACH,oBAAY,SAAZ,CAAsB,MAAtB;AACA,qBAAY,SAAZ,CAAsB,MAAtB;AACA,UAAE,gDAAF,EAAmD,WAAnD,EAAgE,IAAhE,CAAqE,SAArE,EAAgF,IAAhF;;AAEA,sBAAa,E;AACX,iBAAO,YAAY,gBAAZ,CAA6B,cAA7B,CAA4C,KADxC,E;AAEX,kBAAQ,YAAY,gBAAZ,CAA6B,cAA7B,CAA4C,MAFzC,E;AAGX,oBAAU,YAAY,gBAAZ,CAA6B,cAA7B,CAA4C,QAH3C,E;AAIX,oBAAU,YAAY,gBAAZ,CAA6B,cAA7B,CAA4C,Q;AAJ3C,SAAb;AAMA,yBAAiB,MAAjB,CAAwB;AACpB,oBAAU,YAAW,KADD;AAEpB,eAAK,YAAW,QAFI;AAGpB,eAAK,YAAW;AAHI,SAAxB,EAKG,MALH,CAKU,SALV;AAMD;;AAED,iBAAW,YAAX,CAAwB,SAAxB,EAAmC,YAAW,KAA9C;AACA,iBAAW,YAAX,CAAwB,UAAxB,EAAoC,YAAW,MAA/C;AACD;;AAED,eAAW,YAAX,CAAwB,MAAM,MAAN,CAAa,IAArC,EAA2C,MAAM,MAAN,CAAa,KAAxD,E;;;;AAIA,WAAO,MAAP;;AAEA,mB;AACD,GA5HD;;AA8HA,MAAI,cAAc,SAAd,WAAc,CAAS,UAAT,EAAsB,aAAtB,EAAqC;AACrD,QAAI,cAAc,EAAE,yBAAF,CAAlB;QACI,yBAAyB,EAAE,2BAAF,CAD7B;QAEI,SAAS,GAFb;QAGI,cAHJ;QAII,eAJJ;QAKI,cAAc,EAAE,iBAAF,CALlB;;AAOA,2BAAuB,UAAvB,CAAkC,OAAlC;;AAEA,eAAW,IAAX,CAAgB,oBAAhB,EAAsC,IAAtC,CAA2C,YAAU;AACnD,UAAI,QAAQ,EAAE,IAAF,CAAZ;UACI,OAAO,MAAM,IAAN,EADX;UAEI,QAAQ,KAAK,UAAL,IAAmB,KAAK,YAAxB,IAAwC,EAFpD;;AAIA,UAAG,KAAK,WAAR,EAAoB;AAClB,gBAAQ,KAAK,WAAb;AACA,cAAM,MAAN,CAAa;AACX,oBAAU,KADC;AAEX,eAAK,KAAK,SAFC;AAGX,eAAK,KAAK;AAHC,SAAb,EAKC,MALD,CAKQ,SALR;AAMD,OARD,MAQK;AACH,cAAM,GAAN,CAAU,KAAV;AACD;;AAED,iBAAW,YAAX,CAAwB,MAAM,IAAN,CAAW,MAAX,CAAxB,EAA4C,KAA5C;AACD,KAlBD;;AAoBA,eAAW,IAAX,CAAgB,qBAAhB,EAAuC,IAAvC,CAA4C,YAAU;AACpD,UAAI,QAAQ,EAAE,IAAF,CAAZ;AACA,UAAG,MAAM,IAAN,CAAW,YAAX,CAAH,EAA4B;AAC1B,YAAI,OAAO,MAAM,IAAN,CAAW,MAAX,CAAX;YACI,MAAM,MAAM,GAAN,EADV;AAEA,YAAG,SAAS,SAAZ,EAAsB;AACpB,kBAAQ,GAAR;AACD,SAFD,MAEM,IAAG,SAAS,UAAZ,EAAuB;AAC3B,mBAAS,GAAT;AACD,SAFK,MAEA,IAAG,SAAS,cAAZ,EAA2B;AAC/B,sBAAY,SAAZ,CAAsB,MAAtB;AACA,sBAAY,SAAZ,CAAsB,MAAtB;AACD;AACD,cAAM,IAAN,CAAW,SAAX,EAAsB,IAAtB;AACA,mBAAW,YAAX,CAAwB,MAAM,IAAN,CAAW,MAAX,CAAxB,EAA4C,GAA5C;AACD;AACF,KAhBD;;AAkBA,QAAG,OAAO,aAAP,KAAyB,WAAzB,IAAwC,OAAO,cAAc,EAArB,KAA4B,WAAvE,EAAmF;AAC/E,iBAAW,YAAX,CAAwB,MAAxB,EAAgC,cAAc,EAA9C,E;AACA,QAAE,OAAF,EAAW,GAAX,CAAe,cAAc,EAA7B,E;AACH;;AAED,gBAAY,SAAZ,CAAsB,MAAtB;AACA,gBAAY,SAAZ,CAAsB,MAAtB;;AAEA,QAAG,WAAW,YAAd,EAA2B;;AAEzB,eAAS,GAAT;AACD;AACD,eAAW,YAAX,CAAwB,UAAxB,EAAoC,MAApC;;;;AAIA,WAAO,MAAP;AACD,GAjED;;AAmEA,MAAI,OAAO,SAAP,IAAO,GAAW;;AAEpB;;;AAGA;;;AAGA,kBAAc;AACZ,mBAAa,EAAE,eAAF,CADD;AAEZ,4BAFY;AAGZ;AAHY,KAAd;AAKD,GAbD;;;;;AAqBA,cAAY,EAAZ,CAAe,QAAf,EAAyB,WAAzB;;;AAGA,cAAY,EAAZ,CAAe,QAAf,EAAyB,UAAU,CAAV,EAAa;;AAEpC,gBAAY,IAAZ,CAAiB,aAAjB,EAAgC,OAAhC,CAAwC,MAAxC;AACA,MAAE,cAAF;AACD,GAJD;;;AAOA,cAAY,IAAZ,CAAiB,oBAAjB,EAAuC,IAAvC,CAA4C,YAAU;AACpD,QAAI,QAAQ,EAAE,IAAF,CAAZ;AACA,UAAM,IAAN,CAAW,eAAX,EAA4B,MAAM,GAAN,EAA5B;AACD,GAHD;;AAKA,cAAY,IAAZ,CAAiB,qBAAjB,EAAwC,IAAxC,CAA6C,YAAU;AACrD,QAAI,QAAQ,EAAE,IAAF,CAAZ;AACA,QAAG,MAAM,EAAN,CAAS,UAAT,CAAH,EACE,MAAM,IAAN,CAAW,YAAX,EAAyB,SAAzB;AACH,GAJD;;AAMA,iBAAe,EAAf,CAAkB,OAAlB,EAA2B,YAAU;AACnC,QAAI,WAAW,SAAS,aAAT,CAAuB,oCAAvB,CAAf;;AAEA,QAAI,WAAW,SAAS,aAAT,CAAuB,KAAvB,CAAf;AACA,SAAI,IAAI,GAAR,IAAe,OAAO,MAAtB,EAA6B;AAC3B,eAAS,YAAT,CAAsB,OAAK,GAA3B,EAA+B,OAAO,MAAP,CAAc,GAAd,CAA/B;AACD;AACD,QAAI,MAAM,SAAS,aAAT,CAAuB,KAAvB,CAAV;AACA,QAAI,WAAJ,CAAgB,QAAhB;AACA,aAAS,WAAT,GAAuB,IAAI,SAA3B;AACA,iBAAa,KAAb;AACD,GAXD;;;;;AAgBA,UAAQ,EAAR,CAAW,OAAX,EAAoB,UAAU,CAAV,EAAa,IAAb,EAAmB;AACrC,kBAAc;AACV,eAAS,KAAK,GADJ;AAEV,mBAAY,EAAE,eAAF,CAFF;AAGV,4BAHU;AAIV;AAJU,KAAd;AAMD,GAPD;;AASA,IAAE,kBAAF,EAAsB,EAAtB,CAAyB,OAAzB,EAAkC,YAAU;AAC1C,gBAAY,WAAZ;AACD,GAFD;;AAIA,IAAE,yBAAF,EAA6B,EAA7B,CAAgC,OAAhC,EAAyC,YAAU;AACjD,iBAAa,KAAb,CAAmB,MAAnB;AACD,GAFD;;AAIA,IAAE,iCAAF,EAAqC,EAArC,CAAwC,OAAxC,EAAiD,YAAU;AACzD,uBAAmB,KAAnB,CAAyB,MAAzB;AACD,GAFD;;AAIA,IAAE,qBAAF,EAAyB,EAAzB,CAA4B,cAA5B,EAA4C,UAAU,CAAV,EAAa;AACvD,qBAAiB,MAAjB,CAAwB,UAAxB;AACA,4BAAwB,MAAxB,CAA+B,UAA/B;AACA,mB;AACD,GAJD;;AAMA;AAED,CArdD,EAqdG,MArdH;;AAudA,CAAC,aAAK;AACJ,MAAI,SAAS,EAAE,oBAAF,CAAb;MACE,QAAQ,EAAE,sBAAF,EAA0B,MAA1B,CADV;MAEE,MAAM,EAAE,sBAAF,CAFR;MAGE,OAAO,OAAO,IAAP,CAAY,qBAAZ,CAHT;;;AAKE,uBAAqB,6BALvB;;AAOA,MAAI,UAAU,MAAM,IAAN,CAAW,UAAX,CAAd;MACI,SAAU,EAAE,eAAF,CADd;MAEI,WAAW,SAAX,QAAW,GAAI;AAAE,WAAO,uDAAP;AAAgE,GAFrF;MAGI,gBAAgB,CAHpB;MAII,cAAc,KAJlB;;AAOA,MAAI,UAAU,SAAV,OAAU,CAAS,MAAT,EAAiB;;AAE7B,QAAG,UAAQ,IAAX,EAAgB;AACd,QAAE,UAAF,EAAc,IAAd;AACD,KAFD,MAGK,IAAG,UAAQ,KAAX,EAAiB;AACpB,QAAE,UAAF,EAAc,IAAd;AACD;AAEF,GATD;;AAWA,WAAS,SAAT,GAAoB;AAClB,oBAAgB,CAAhB;AACA,QAAI,YAAY,IAAI,IAAJ,CAAS,IAAT,CAAhB;AACA,cAAU,MAAV;;;;;;;;;AASA,UAAM,WAAN,CAAkB,kBAAlB;AACD;;AAED,MAAI,gBAAgB,SAAhB,aAAgB,CAAS,IAAT,EAAe,SAAf,EAAyB;AAC3C,aAAS,WAAT,CAAqB,OAArB,EAA6B,OAA7B,E,YAAkD,SAAlD,EAA6D;AAC3D,WAAK,IAAL,CAAU,UAAV,EAAqB,KAArB;;AAEA,UAAG,SAAH,EAAc,EAAE,IAAF,EAAO,OAAP,EAAgB,MAAhB;AACd,cAAQ,GAAR,CAAY;AACV,oBAAY;AADF,OAAZ;AAGA,QAAE,OAAF,EACG,QADH,CACY,iBADZ,EAEG,IAFH,MAEW,OAFX,EAGG,QAHH,CAGY,SAHZ;AAID;;AAED,aAAS,gBAAT,CAA0B,MAA1B,EAAiC;AAC/B,aAAO,IAAP,CAAY,UAAS,CAAT,EAAW,CAAX,EAAc;AACxB,YAAI,EAAE,KAAF,GAAU,EAAE,KAAhB,EACE,OAAO,CAAC,CAAR,CADF,KAEK,IAAI,EAAE,KAAF,GAAU,EAAE,KAAhB,EACH,OAAO,CAAP,CADG,KAGH,OAAO,CAAP;AACH,OAPD;AAQA,aAAO,OAAO,CAAP,EAAU,GAAjB;AACD;;AAED,QAAG,gBAAgB,YAAnB,EAAiC,OAAO,KAAP;;AAEjC,QAAG,SAAS,MAAZ,EAAmB;AAAE,kBAAY,GAAZ,EAAiB,oCAAjB,EAAuD,IAAvD,EAA8D,OAAO,KAAP;AAAe;;AAElG,QAAG,gBAAgB,WAAhB,IAA+B,KAAK,MAAL,KAAgB,CAAlD,EAAqD;AACnD,oBAAc,YAAd;AACA,kBAAY,SAAZ,EAAuB,kBAAvB,EAA2C,KAA3C;AACA,aAAO,KAAP;AACD;;AAED,QAAG,SAAS,IAAT,IAAiB,CAAC,KAAK,SAA1B,EAAoC;AAAE,kBAAY,SAAZ,EAAuB,mBAAvB,EAA4C,IAA5C,EAAmD,OAAO,KAAP;AAAe;;;AAGxG,QAAI,QAAQ,KAAK,SAAL,CAAe,MAA3B;;AAEA,UAAM,GAAN,CAAW,UAAC,IAAD,EAAU;AACnB,UAAI,KAAK,EAAE,OAAF,EACN,QADM,CACG,qBADH,EAEN,QAFM,CAEG,SAFH,CAAT;;AAIA,UAAI,UAAU,EAAE,4BAAF,EACX,QADW,CACF,EADE,CAAd;AAEA,UAAI,MAAM,EAAE,cAAa,iBAAiB,KAAK,MAAtB,CAAb,GAA2C,KAA7C,EACP,QADO,CACE,yBADF,EAEP,QAFO,CAEE,OAFF,CAAV;;AAIA,UAAI,WAAW,EAAE,mCAAF,EACZ,QADY,CACH,EADG,CAAf;AAEA,UAAI,QAAQ,EAAE,OAAF,EACT,QADS,CACA,yBADA,EAET,IAFS,OAEA,KAAK,IAFL,EAGT,QAHS,CAGA,QAHA,CAAZ;;;AAMA,UAAI,eAAe,EAAnB;AACA,mBAAa,IAAb,GAAoB;AAClB,aAAK,KAAK,KAAL,CAAW,KAAX,CAAiB,SADJ;AAElB,cAAM,KAAK,KAAL,CAAW,KAAX,CAAiB,SAFL;AAGlB,kBAAU,KAAK,KAAL,CAAW,KAAX,CAAiB;AAHT,OAApB;;AAMA,UAAI,OAAO,iBAAiB,CAAjB,EAAoB,UAApB,CAA+B,aAAa,IAA5C,CAAX;AACA,UAAI,YAAY,EAAE,OAAF,EACb,QADa,CACJ,YADI,EAEb,IAFa,CAER,IAFQ,EAGb,QAHa,CAGJ,QAHI,CAAhB;;;AAMA,UAAI,KAAK,SAAL,IAAkB,KAAK,SAAL,CAAe,MAArC,EAA6C;AAC3C,YAAI,QAAQ,KAAK,SAAL,CAAe,MAAf,CAAsB,CAAtB,CAAZ;AACA,YAAI,cAAc,EAAE,SAAF,EACf,QADe,CACN,cADM,EAEf,IAFe,CAEV,MAAM,IAAN,GAAW,IAFD,EAGf,QAHe,CAGN,QAHM,CAAlB;;AAKA,YAAI,aAAa,KAAb,IAAsB,WAAW,MAAM,OAA3C,EAAoD;AAClD,cAAI,eAAe,EAAE,SAAF,EAChB,QADgB,CACP,eADO,EAEhB,IAFgB,CAEX,MAAM,OAAN,CAAc,KAFH,EAGhB,QAHgB,CAGP,QAHO,CAAnB;AAIA,cAAI,WAAW,MAAM,OAArB,EAA8B;AAC5B,gBAAI,eAAe,EAAE,SAAF,EAChB,QADgB,CACP,eADO,EAEhB,IAFgB,CAEX,MAAM,OAAN,CAAc,KAFH,EAGhB,QAHgB,CAGP,YAHO,CAAnB;AAID;AACF;AACF,OAnBD,MAmBK;AACH,gBAAQ,GAAR;AACD;;AAED,UAAI,cAAc,2BAAyB,KAAK,EAA9B,UACf,QADe,CACN,mCADM,EAEf,IAFe,gBAGf,QAHe,CAGN,EAHM,EAIf,IAJe,CAIV,oDAJU,CAAlB;AAOD,KA/DD;;AAiEA,MAAE,qBAAF,EAAyB,EAAzB,CAA4B,OAA5B,EAAoC,UAAC,CAAD,EAAK;AACvC,UAAI,aAAa,EAAE,MAAF,CAAS,YAAT,CAAsB,YAAtB,CAAjB;;;AAEI,eAAS,iBAAiB,CAAjB,CAFb;UAGI,aAAa,SAAS,aAAT,CAAuB,iBAAvB,CAHjB;AAIA,UAAI,mBAAmB,SAAnB,gBAAmB,GAAW;AAAE,eAAO,WAAW,YAAX,CAAwB,SAAxB,MAAuC,WAA9C;AAA2D,OAA/F;;AAEA,QAAE,OAAF,EAAW,GAAX,CAAe,UAAf;AACA,iBAAW,YAAX,CAAwB,MAAxB,EAA+B,UAA/B;AACA,UAAG,gBAAH,EAAoB;AAClB,mBAAW,KAAX,CAAiB,KAAjB,GAAyB,MAAzB;AACD;;;;;;;;;;;AAWD,aAAO,MAAP,CAAc,gBAAd;;;AAGA,aAAO,KAAP,CAAa,MAAb;AACD,KA1BD;;AA4BA,SAAK,IAAL,CAAU,UAAV,EAAqB,KAArB;AAED,GAxID;;AA0IA,WAAS,UAAT,C,aAAiC,UAAjC,EAA4C;AAC1C,iBAAa,SAAS,UAAT,CAAb;;AAEA,QAAI,MAAQ,OAAO,KAAP,CAAa,UAAb,CAAF,GACH,UADG,gBACkB,OAAO,GAAP,EADlB,iBAC0C,QAAQ,GAAR,EAD1C,GAEH,UAFG,gBAEkB,OAAO,GAAP,EAFlB,iBAE0C,QAAQ,GAAR,EAF1C,cAEgE,UAF1E;;;AAKA,QAAI,OAAO,KAAP,CAAa,UAAb,KAA4B,eAAe,CAA3C,IAAgD,gBAAc,WAAlE,EAA+E;AAC7E,oBAAc,IAAd,EAAoB,GAApB;AACA,aAAO,KAAP;AACD;;AAED,QAAG,gBAAgB,YAAnB,EAAiC,OAAO,KAAP;;AAEjC,MAAE,IAAF,CAAO;AACL,gBAAU,MADL;AAEL,aAAO,IAFF;AAGL,WAAK,GAHA;AAIL,YAAM,MAAM,SAAN;AAJD,KAAP,EAKG,IALH,CAKQ,UAAS,MAAT,EAAiB;AACvB,UAAG,MAAH,EAAW;;;AAGT,YAAG,kBAAkB,OAAO,IAAP,CAAY,UAA9B,IAA4C,OAAO,IAAP,CAAY,aAAZ,GAA4B,CAA3E,EAA8E;AAC5E,wBAAc,WAAd;AACA,kBAAQ,KAAR;AACA,wBAAc,MAAd,EAAsB,GAAtB,E;AACA,iBAAO,KAAP;AACD;;AAED,sBAAc,MAAd,EAAsB,GAAtB;AACA,gBAAQ,KAAR;AACD,OAZD,MAYM;AACJ,gBAAQ,GAAR;AACD;AACF,KArBD,EAqBG,IArBH,CAqBQ,UAAS,CAAT,EAAY;AAClB,cAAQ,GAAR,iCAA0C,EAAE,MAA5C;AACA,cAAQ,KAAR;AACA,oBAAc,MAAd,EAAsB,GAAtB;AACD,KAzBD;AA2BD;;AAED,MAAI,EAAJ,CAAO,QAAP,EAAiB,UAAU,GAAV,EAAc;;AAE7B,QAAG,MAAM,GAAN,CAAU,CAAV,EAAa,aAAb,EAAH,EAAiC;;AAE/B,UAAI,KAAK,SAAL,GAAiB,KAAK,YAAtB,IAAsC,KAAK,YAA3C,IAA2D,gBAAgB,WAA/E,EAA4F;AAC1F;AACA,aAAK,IAAL,CAAU,UAAV,EAAsB,IAAtB;AACA,gBAAQ,IAAR;AACA,mBAAW,aAAX;AACD;AAEF;AAEF,GAbD;;;AAgBA,OAAK,EAAL,CAAQ,OAAR,EAAiB,YAAU;AACzB,QAAI,OAAO,MAAM,GAAN,CAAU,CAAV,CAAX;AACA,QAAG,CAAC,KAAK,EAAL,CAAQ,WAAR,CAAJ,EAAyB;AACvB,UAAG,KAAK,aAAL,EAAH,EAAyB;AACvB,aAAK,IAAL,CAAU,UAAV,EAAsB,IAAtB;AACA,wBAAgB,CAAhB;AACA,sBAAc,WAAd;AACA,gBAAQ,IAAR,E;AACA,oB;AACA,mBAAW,aAAX;AACD,OAPD,MAOK;;AAEH,YAAG,KAAK,cAAR,EAAwB,KAAK,cAAL;AACxB,cAAM,QAAN,CAAe,kBAAf;AACD;AACF;AACF,GAhBD;;AAmBA,QAAM,EAAN,CAAS,QAAT,EAAmB,YAAU;AAC3B,QAAG,MAAM,GAAN,CAAU,CAAV,EAAa,aAAb,EAAH,EAAiC;AAC/B,sBAAgB,CAAhB;AACA,oBAAc,WAAd;AACA,cAAQ,IAAR;AACA;AACA,iBAAW,aAAX;AACD;AACF,GARD;;;AAWA,QAAM,EAAN,CAAS,QAAT,EAAmB,UAAU,CAAV,EAAa;AAC9B,MAAE,cAAF;AACD,GAFD;;AAIA,SAAO,EAAP,CAAU,iBAAV,EAA4B,UAAU,CAAV,EAAa;AACvC;AACA,YAAQ,GAAR,CAAY,EAAZ,E;AACD,GAHD;AAKD,CAtRD,EAsRG,MAtRH","file":"main-widget-config.js","sourcesContent":["($ => {\r\n\r\n  let widget = widgetsCountdown[0];\r\n  var themeConfig = {\r\n    simple_countdown: {\r\n        sizes: {\r\n          s: {\r\n            width: 180,\r\n            height: 150,\r\n            layout: 'horizontal'\r\n          },\r\n          m: {\r\n            width: 300,\r\n            height: 250,\r\n            layout: 'vertical'\r\n          },\r\n          l: {\r\n            width: 160,\r\n            height: 600,\r\n            layout: 'horizontal'\r\n          },\r\n          xl: {\r\n            width: 728,\r\n            height: 90,\r\n            layout: 'horizontal'\r\n          },\r\n          xxl: {\r\n            width: 300,\r\n            height: 600,\r\n            layout: 'vertical'\r\n          },\r\n          custom: {\r\n            width: 350,\r\n            height: 600,\r\n            layout: 'vertical'\r\n          }\r\n        },\r\n        initSliderSize: {\r\n          width: 350,\r\n          height: 600,\r\n          maxWidth: 500,\r\n          minWidth: 350\r\n        }\r\n      }\r\n  };\r\n  \r\n  // function getHeightByTheme(theme){\r\n  //   return (theme === 'simple_countdown' ? 238 : 300);\r\n  // }\r\n\r\n  // function getBorderByTheme(theme) {\r\n  //   switch (theme) {\r\n  //     case \"oldschool\":\r\n  //       return 2;\r\n  //       break;\r\n  //     default:\r\n  //       return 0;\r\n  //   }\r\n  // }\r\n\r\n  var $widthController = $('#w-width').slider({\r\n    tooltip: 'always',\r\n    handle: 'square'\r\n  }),\r\n  $borderRadiusController = $('#w-borderradius').slider({\r\n    tooltip: 'always',\r\n    handle: 'square'\r\n  }),\r\n  $getCodeButton = $('.js_get_widget_code'),\r\n  widgetNode = document.querySelector(\"div[w-tmapikey]\"),\r\n  $tabButtons = $('.js-tab-buttons'),\r\n  $layoutBox = $('#js-layout-box');\r\n\r\n\r\n  // function toggleDisabled(widgetNode){\r\n  //   if ( widgetNode.getAttribute('w-id') === '') {\r\n  //     $getCodeButton.prop(\"disabled\",true);\r\n  //   }else {\r\n  //     $getCodeButton.prop('disabled',false);\r\n  //   }\r\n  // }\r\n\r\n  var $configForm = $(\".main-widget-config-form\"),\r\n    $widgetModal = $('#js_widget_modal'),\r\n    $widgetModalNoCode = $('#js_widget_modal_no_code');\r\n\r\n  //variables for fixed widget\r\n  var $window = $(window),\r\n      $containerWidget = $(\".widget-container-wrapper\"),\r\n      $configBlock = $(\".config-block\"),\r\n      window_min = 0,\r\n      window_max = 0,\r\n      desktopWidth = 1200,\r\n      threshold_offset = 50;\r\n  /*\r\n   set the container's maximum and minimum limits as well as movement thresholds\r\n   */\r\n  function setLimits(){\r\n    //max and min container movements\r\n    var topCss = ($containerWidget.css(\"top\")>0) ? parseInt($containerWidget.css(\"top\")) : 0;\r\n    var headerOffset = $('.top-bar').height() + /*padding of top-bar*/8 + /*bottom-margin*/10;\r\n    var max_move = $configBlock.offset().top + $configBlock.height() - $containerWidget.height() - topCss - headerOffset;\r\n    var min_move = $configBlock.offset().top - headerOffset;\r\n\r\n    $containerWidget.attr(\"data-min\", min_move).attr(\"data-max\",max_move);\r\n    //window thresholds so the movement isn't called when its not needed!\r\n    window_min = min_move - threshold_offset;\r\n    window_max = max_move + $containerWidget.height() + threshold_offset;\r\n  }\r\n\r\n  /*\r\n   widget container scroll handler\r\n   */\r\n  function windowScroll(){\r\n    let innerWidth = window.innerWidth;\r\n    let j = 0;\r\n    function updateScroll() {\r\n      //if the window is within the threshold, begin movements\r\n      if ($window.scrollTop() >= window_min && $window.scrollTop() < window_max) {\r\n        if ($containerWidget.height() < $configBlock.height() && innerWidth >= desktopWidth) {\r\n          //reset the limits (optional)\r\n          setLimits();\r\n          //move the container\r\n          containerMove();\r\n        }\r\n      }\r\n      j++;\r\n    }\r\n    if(j === 0) updateScroll();\r\n\r\n    setTimeout(() => {\r\n      if (innerWidth < desktopWidth && $containerWidget.height() > $configBlock.height()) {\r\n        containerMove_clearOffset();\r\n        updateScroll();\r\n      }\r\n      if($containerWidget.height() < $configBlock.height() || innerWidth >= desktopWidth) {\r\n        if( innerWidth < desktopWidth ){\r\n          containerMove_clearOffset();\r\n        }\r\n        updateScroll();\r\n      }\r\n    }, 200);    \r\n\r\n  }\r\n\r\n  $window.on(\"scroll resize\", windowScroll);\r\n\r\n  /**\r\n   * Clear top offset of widget container\r\n   */\r\n  function containerMove_clearOffset(){\r\n    $containerWidget.css(\"margin-top\", 0);\r\n  }\r\n  /**\r\n   * Handles moving the container if needed.\r\n   **/\r\n  function containerMove(){\r\n    var wst = $window.scrollTop();\r\n    //if the window scroll is within the min and max (the container will be \"sticky\";\r\n    if( wst >= $containerWidget.attr(\"data-min\") && wst <= $containerWidget.attr(\"data-max\") ){\r\n      //work out the margin offset\r\n      var margin_top = $window.scrollTop() - $containerWidget.attr(\"data-min\");\r\n      //margin it down!\r\n      $containerWidget.css(\"margin-top\", margin_top);\r\n      //if the window scroll is below the minimum\r\n    }else if( wst <= $containerWidget.attr(\"data-min\") ){\r\n      //fix the container to the top.\r\n      $containerWidget.css(\"margin-top\",0);\r\n      //if the window scroll is above the maximum\r\n    }else if( wst > $containerWidget.attr(\"data-max\") ){\r\n      //fix the container to the top\r\n      $containerWidget.css(\"margin-top\", $containerWidget.attr(\"data-max\")-$containerWidget.attr(\"data-min\")+\"px\" );\r\n    }\r\n  }\r\n\r\n  var replaceApiKey = function (options) {\r\n    let userKey = options.userKey || sessionStorage.getItem('tk-api-key');\r\n\r\n    if(userKey !== null) {\r\n      let {inputApiKey, widgetNode , widget } = options;\r\n      inputApiKey\r\n        .attr('value', userKey)\r\n        .data('userAPIkey', userKey)\r\n        .val(userKey);\r\n      widgetNode.setAttribute(\"w-tm-api-key\", userKey);\r\n      widget.update();\r\n    }\r\n  };\r\n\r\n  var changeState = function(event){\r\n    if(!event.target.name){\r\n      return;\r\n    }\r\n    const targetValue = event.target.value,\r\n          targetName = event.target.name;\r\n\r\n    if(targetName === \"w-theme\" ){\r\n      let widthSlider = $('.js_widget_width_slider'),\r\n          widgetContainerWrapper = $containerWidget,\r\n          widgetContainer = $(\".widget-container\", widgetContainerWrapper),\r\n          $border_slider = $('.js_widget_border_slider');\r\n\r\n\r\n      if(targetValue === \"fullwidth\"){\r\n        $layoutBox.slideUp();\r\n        widthSlider.slideUp(\"fast\");\r\n        $borderRadiusController.slider('setValue', 0);\r\n        widgetNode.setAttribute('w-borderradius', 0);\r\n        $border_slider.slideUp(\"fast\");\r\n        widgetContainerWrapper.css({\r\n          width: \"100%\"\r\n        });\r\n        widgetContainer.css({\r\n          width: \"100%\"\r\n        });\r\n        widgetNode.setAttribute('w-height', 700);\r\n      }else {\r\n        let excludeOption = {\r\n              id : widgetNode.getAttribute('w-id')\r\n            };\r\n        resetWidget($configForm , excludeOption );\r\n\r\n        $layoutBox.slideDown(\"fast\");\r\n        widthSlider.slideDown(\"fast\");\r\n        $border_slider.slideDown(\"fast\");\r\n        $borderRadiusController.slider('setValue', 4);\r\n        widgetNode.setAttribute('w-borderradius', 4);\r\n        widgetContainerWrapper.css({\r\n          width: 'auto'\r\n        });\r\n      }\r\n      \r\n    }\r\n\r\n    /*\r\n    //set attr for 'seconds' radio-btn\r\n    if(targetName === \"w-seconds\"){\r\n      if (targetValue !== 'showSeconds') {\r\n        widgetNode.setAttribute('w-seconds', 'hideSeconds');\r\n      }\r\n    }\r\n    */\r\n\r\n    if(targetName === \"w-layout\"){\r\n      let sizeConfig = themeConfig.simple_countdown.initSliderSize;\r\n\r\n      if(targetValue === 'horizontal'){\r\n        sizeConfig = {\r\n          width: 620,\r\n          // height: getHeightByTheme(widgetNode.getAttribute('w-theme')),\r\n          height: 252,\r\n          maxWidth: 900,\r\n          minWidth: 620\r\n        };\r\n      }\r\n\r\n      $widthController.slider({\r\n          setValue: sizeConfig.width ,\r\n          max: sizeConfig.maxWidth,\r\n          min: sizeConfig.minWidth\r\n        })\r\n        .slider('refresh');\r\n\r\n      widgetNode.setAttribute('w-width', sizeConfig.width);\r\n      widgetNode.setAttribute('w-height', sizeConfig.height);\r\n    }\r\n\r\n    //Check fixed sizes for 'simple_countdown' theme\r\n    if(targetName === \"w-proportion\") {\r\n      let widthSlider = $('.js_widget_width_slider'); //if init it on top -> then see bug on Vertical/Horizontal layout change\r\n      let sizeConfig = {\r\n        width: themeConfig.simple_countdown.sizes[targetValue].width,\r\n        height: themeConfig.simple_countdown.sizes[targetValue].height,\r\n        maxWidth: 600,\r\n        minWidth: 350\r\n      };\r\n\r\n      //set layout\r\n      widgetNode.setAttribute('w-layout', themeConfig.simple_countdown.sizes[targetValue].layout);\r\n\r\n      if (targetValue !== 'custom') {\r\n        $tabButtons.slideUp(\"fast\");\r\n        widthSlider.slideUp(\"fast\");\r\n      }else{\r\n        $tabButtons.slideDown(\"fast\");\r\n        widthSlider.slideDown(\"fast\");\r\n        $('input:radio[name=\"w-layout\"][value=\"vertical\"]',$tabButtons).prop('checked', true);\r\n\r\n        sizeConfig = { //default size\r\n          width: themeConfig.simple_countdown.initSliderSize.width,  //350\r\n          height: themeConfig.simple_countdown.initSliderSize.height,  //600\r\n          maxWidth: themeConfig.simple_countdown.initSliderSize.maxWidth,  //500\r\n          minWidth: themeConfig.simple_countdown.initSliderSize.minWidth // 350\r\n        };\r\n        $widthController.slider({\r\n            setValue: sizeConfig.width,\r\n            max: sizeConfig.maxWidth,\r\n            min: sizeConfig.minWidth\r\n          })\r\n          .slider('refresh');\r\n      }\r\n\r\n      widgetNode.setAttribute('w-width', sizeConfig.width);\r\n      widgetNode.setAttribute('w-height', sizeConfig.height);\r\n    }\r\n\r\n    widgetNode.setAttribute(event.target.name, event.target.value); //set attr in widget\r\n\r\n    //toggleDisabled(widgetNode);//set disabled btn if input is empty\r\n\r\n    widget.update();\r\n\r\n    windowScroll();//recalculate widget container position\r\n  };\r\n\r\n  var resetWidget = function(configForm , excludeOption) {\r\n    let widthSlider = $('.js_widget_width_slider'),\r\n        widgetContainerWrapper = $('.widget-container-wrapper'),\r\n        height = 600,\r\n        theme,\r\n        layout,\r\n        $tabButtons = $('.js-tab-buttons');\r\n\r\n    widgetContainerWrapper.removeAttr('style');\r\n\r\n    configForm.find(\"input[type='text']\").each(function(){\r\n      let $self = $(this),\r\n          data = $self.data(),\r\n          value = data.userAPIkey || data.defaultValue || '';\r\n      \r\n      if(data.sliderValue){\r\n        value = data.sliderValue;\r\n        $self.slider({\r\n          setValue: value,\r\n          max: data.sliderMax,\r\n          min: data.sliderMin\r\n        })\r\n        .slider('refresh');\r\n      }else{\r\n        $self.val(value);\r\n      }\r\n\r\n      widgetNode.setAttribute($self.attr('name'), value);\r\n    });\r\n\r\n    configForm.find(\"input[type='radio']\").each(function(){\r\n      var $self = $(this);\r\n      if($self.data('is-checked')){\r\n        let name = $self.attr('name'),\r\n            val = $self.val();\r\n        if(name === 'w-theme'){\r\n          theme = val;\r\n        }else if(name === 'w-layout'){\r\n          layout = val;\r\n        }else if(name === 'w-proportion'){\r\n          $tabButtons.slideDown(\"fast\");\r\n          widthSlider.slideDown(\"fast\");\r\n        }\r\n        $self.prop('checked', true);\r\n        widgetNode.setAttribute($self.attr('name'), val);\r\n      }\r\n    });\r\n\r\n    if(typeof excludeOption !== 'undefined' && typeof excludeOption.id !== 'undefined'){\r\n        widgetNode.setAttribute('w-id', excludeOption.id); //set val in widget\r\n        $('#w-id').val(excludeOption.id);//set val in cofigurator\r\n    }\r\n\r\n    $tabButtons.slideDown(\"fast\");\r\n    widthSlider.slideDown(\"fast\");\r\n\r\n    if(layout === 'horizontal'){\r\n      //height = getHeightByTheme(theme);\r\n      height = 252;\r\n    }\r\n    widgetNode.setAttribute('w-height', height);\r\n\r\n    // toggleDisabled(widgetNode);//set disabled btn if input is empty\r\n\r\n    widget.update();\r\n  };\r\n\r\n  var init = function (){\r\n    //sets the limits for the first load\r\n    setLimits();\r\n\r\n    //do one container move on load\r\n    containerMove();\r\n\r\n    // replace Api-Key if user logged\r\n    replaceApiKey({\r\n      inputApiKey: $('#w-tm-api-key'),\r\n      widgetNode,\r\n      widget\r\n    });\r\n  };\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Events\r\n   */\r\n  $configForm.on(\"change\", changeState);\r\n  // Mobile devices. Force 'change' by 'Go' press\r\n\r\n  $configForm.on(\"submit\", function (e) {\r\n    //console.log('pressed on.submit');\r\n    $configForm.find('input:focus').trigger('blur');\r\n    e.preventDefault();\r\n  });\r\n\r\n  /*set tooltip value above slider*/\r\n  $configForm.find(\"input[type='text']\").each(function(){\r\n    var $self = $(this);\r\n    $self.data('default-value', $self.val());\r\n  });\r\n\r\n  $configForm.find(\"input[type='radio']\").each(function(){\r\n    var $self = $(this);\r\n    if($self.is(':checked'))\r\n      $self.data('is-checked', 'checked');\r\n  });\r\n\r\n  $getCodeButton.on('click', function(){\r\n    var codeCont = document.querySelector(\".language-html.widget_dialog__code\");\r\n\r\n    var htmlCode = document.createElement(\"div\");\r\n    for(var key in widget.config){\r\n      htmlCode.setAttribute(\"w-\"+key,widget.config[key]);\r\n    }\r\n    var tmp = document.createElement(\"div\");\r\n    tmp.appendChild(htmlCode);\r\n    codeCont.textContent = tmp.innerHTML;\r\n    $widgetModal.modal();\r\n  });\r\n\r\n  /**\r\n   * check if user logged just before enter widget page\r\n   */\r\n  $window.on('login', function (e, data) {\r\n    replaceApiKey({\r\n        userKey: data.key,\r\n        inputApiKey:$('#w-tm-api-key'),\r\n        widgetNode,\r\n        widget\r\n      });\r\n  });\r\n\r\n  $('.js_reset_widget').on('click', function(){\r\n    resetWidget($configForm);\r\n  });\r\n\r\n  $('#js_widget_modal__close').on('click', function(){\r\n    $widgetModal.modal('hide');\r\n  });\r\n\r\n  $('#js_widget_modal_no_code__close').on('click', function(){\r\n    $widgetModalNoCode.modal('hide');\r\n  });\r\n\r\n  $('#js_styling_nav_tab').on('shown.bs.tab', function (e) {\r\n    $widthController.slider('relayout');\r\n    $borderRadiusController.slider('relayout');\r\n    windowScroll();//recalculate widget container position\r\n  });\r\n\r\n  init();\r\n\r\n})(jQuery);\r\n\r\n($ => {\r\n  let $modal = $('#get-eventId-modal'),\r\n    $form = $('#js_get_eventId_form', $modal),\r\n    $ul = $('#js_get_eventId_list'),\r\n    $btn = $modal.find('#js_get-eventId_btn'),\r\n    //$resultsCount = $form.find('.get_eventId_results'),\r\n    cssValidationClass = 'get-eventId_form-validation';\r\n\r\n  let keyword = $form.find('#keyword'),\r\n      apikey =  $('#w-tm-api-key'),\r\n      eventUrl = ()=>{ return 'https://app.ticketmaster.com/discovery/v2/events.json' },\r\n      pageIncrement = 0,\r\n      loadingFlag = false;\r\n\r\n\r\n  let loading = function(action) {\r\n    // add the overlay with loading image to the page\r\n    if(action==\"on\"){\r\n      $('#spinner').show();\r\n    }\r\n    else if(action==\"off\"){\r\n      $('#spinner').hide();\r\n    }\r\n\r\n  };\r\n\r\n  function resetForm(){\r\n    pageIncrement = 0;\r\n    let listItems = $ul.find('li');\r\n    listItems.remove();\r\n    /*$form.find('input').each(function(){\r\n      var $self = $(this);\r\n      if($self.attr('id','keyword')){\r\n        $self.val('');\r\n      }\r\n    });*/\r\n\r\n    // Clear highlight\r\n    $form.removeClass(cssValidationClass);\r\n  }\r\n\r\n  var renderResults = function(data, ulElement){\r\n    function showMessage(element,message, /*optional*/clearList) {\r\n      $btn.attr('disabled',false);\r\n\r\n      if(clearList) $('li',element).remove();\r\n      element.css({\r\n        'overflow': 'auto'\r\n      });\r\n      $('<li/>')\r\n        .addClass('list-group-item')\r\n        .text(`${message}`)\r\n        .appendTo(ulElement);\r\n    };\r\n\r\n    function getImageForEvent(images){\r\n      images.sort(function(a,b) {\r\n        if (a.width < b.width)\r\n          return -1;\r\n        else if (a.width > b.width)\r\n          return 1;\r\n        else\r\n          return 0;\r\n      });\r\n      return images[0].url;\r\n    }\r\n\r\n    if(loadingFlag === \"FINAL_PAGE\") return false;\r\n\r\n    if(data === 'FAIL'){ showMessage($ul, 'Failure, possible key not correct.' ,true); return false; }\r\n\r\n    if(loadingFlag === 'STOP_LOAD' && data.length !== 0 ){\r\n      loadingFlag = \"FINAL_PAGE\";\r\n      showMessage(ulElement, 'No more results.', false);\r\n      return false;\r\n    }\r\n    \r\n    if(data === null || !data._embedded){ showMessage(ulElement, 'No results found.' ,true); return false; }\r\n\r\n    //start render data\r\n    let items = data._embedded.events;\r\n\r\n    items.map( (item) => {\r\n      let li = $('<li/>')\r\n        .addClass('list-group-item row')\r\n        .appendTo(ulElement);\r\n      \r\n      let spanImg = $('<span class=\"thumbnail\" />')\r\n        .appendTo(li);\r\n      let img = $('<img src='+ getImageForEvent(item.images)+' />')\r\n        .addClass('list-group-item-heading')\r\n        .appendTo(spanImg);\r\n\r\n      let $wrapCol = $('<div class=\"event-text-wrapper\"/>')\r\n        .appendTo(li);\r\n      let title = $('<h3/>')\r\n        .addClass('list-group-item-heading')\r\n        .text(` ${item.name}`)\r\n        .appendTo($wrapCol);\r\n\r\n      /*add time*/\r\n      let currentEvent = {};\r\n      currentEvent.date = {\r\n        day: item.dates.start.localDate,\r\n        time: item.dates.start.localTime,\r\n        dateTime: item.dates.start.dateTime\r\n      };\r\n\r\n      let time = widgetsCountdown[0].formatDate(currentEvent.date);\r\n      let eventTime = $('<h4/>')\r\n        .addClass('event-time')\r\n        .text(time)\r\n        .appendTo($wrapCol);\r\n      /*add time end*/\r\n\r\n      if (item._embedded && item._embedded.venues) {\r\n        let venue = item._embedded.venues[0];\r\n        let addressName = $('<span/>')\r\n          .addClass('address-name')\r\n          .text(venue.name+'. ')\r\n          .appendTo($wrapCol);\r\n\r\n        if ('address' in venue && 'line1' in venue.address) {\r\n          let addressline1 = $('<span/>')\r\n            .addClass('address-line1')\r\n            .text(venue.address.line1)\r\n            .appendTo($wrapCol);\r\n          if ('line2' in venue.address) {\r\n            let addressline1 = $('<span/>')\r\n              .addClass('address-line2')\r\n              .text(venue.address.line2)\r\n              .appendTo(addressline1);\r\n          }\r\n        }\r\n      }else{\r\n        console.log(`no _embedded found`);\r\n      }\r\n\r\n      let buttonSetId = $(`<button data-event=\"${item.id}\"/>`)\r\n        .addClass('js_set-eventId_btn btn btn-submit')\r\n        .text(`Set this ID`)\r\n        .appendTo(li)\r\n        .wrap('<div class =\"wrapper-set-eventId_btn text-right\"/>');\r\n\r\n\r\n    });\r\n\r\n    $('.js_set-eventId_btn').on('click',(e)=>{\r\n      let selectedID = e.target.getAttribute('data-event'),\r\n          //find configurator and widget\r\n          widget = widgetsCountdown[0],\r\n          widgetNode = document.querySelector(\"div[w-tmapikey]\");\r\n      let isFullWidthTheme = function (){ return widgetNode.getAttribute('w-theme') === \"fullwidth\" };\r\n      \r\n      $('#w-id').val(selectedID);\r\n      widgetNode.setAttribute('w-id',selectedID);\r\n      if(isFullWidthTheme){\r\n        widgetNode.style.width = '100%';\r\n      }\r\n\r\n      /*\r\n      //toggle $getCodeButton\r\n      if ( widgetNode.getAttribute('w-id') === '') {\r\n        $getCodeButton.prop(\"disabled\",true);\r\n      }else {\r\n        $getCodeButton.prop('disabled',false);\r\n      }\r\n      */\r\n\r\n      widget.update(isFullWidthTheme);\r\n\r\n      // Close dialog\r\n      $modal.modal('hide');\r\n    });\r\n\r\n    $btn.attr('disabled',false);\r\n\r\n  };\r\n\r\n  function submitForm( /*optional*/pageNumero){\r\n    pageNumero = parseInt(pageNumero);\r\n\r\n    let url = ( Number.isNaN(pageNumero) )\r\n      ? `${eventUrl()}?apikey=${apikey.val()}&keyword=${keyword.val()}`\r\n      : `${eventUrl()}?apikey=${apikey.val()}&keyword=${keyword.val()}&page=${pageNumero}`;\r\n\r\n    //stop load\r\n    if( Number.isNaN(pageNumero) && pageNumero !== 0 && loadingFlag==='STOP_LOAD') {\r\n      renderResults(null, $ul);\r\n      return false\r\n    };\r\n\r\n    if(loadingFlag === 'FINAL_PAGE') return false;\r\n\r\n    $.ajax({\r\n      dataType: 'json',\r\n      async: true,\r\n      url: url,\r\n      data: $form.serialize()\r\n    }).done(function(result) {\r\n      if(result) {\r\n\r\n        //last page reached\r\n        if(pageIncrement === result.page.totalPages && result.page.totalElements > 0) {\r\n          loadingFlag = 'STOP_LOAD';\r\n          loading('off');\r\n          renderResults(result, $ul); //add message at bottom of list\r\n          return false;\r\n        };\r\n\r\n        renderResults(result, $ul);\r\n        loading('off');\r\n      }else {\r\n        console.log(`no result found` );\r\n      }\r\n    }).fail(function(e) {\r\n      console.log(`There was an fail status - ${e.status}` );\r\n      loading('off');\r\n      renderResults('FAIL', $ul);\r\n    });\r\n\r\n  }\r\n\r\n  $ul.on('scroll', function (elm){\r\n    //submitForm when go to bottom of list\r\n    if($form.get(0).checkValidity()) {\r\n\r\n      if (this.scrollTop + this.clientHeight == this.scrollHeight && loadingFlag === 'KEEP_LOAD') {\r\n        pageIncrement++;\r\n        $btn.attr('disabled', true);\r\n        loading('on');\r\n        submitForm(pageIncrement);\r\n      }\r\n\r\n    }\r\n\r\n  });\r\n\r\n  // EVENTS\r\n  $btn.on('click', function(){\r\n    var form = $form.get(0);\r\n    if(!$btn.is(':disabled')){\r\n      if(form.checkValidity()) {\r\n        $btn.attr('disabled', true);\r\n        pageIncrement = 0;\r\n        loadingFlag = 'KEEP_LOAD';\r\n        loading('on'); //show loading-spinner\r\n        resetForm(); //clear\r\n        submitForm(pageIncrement);\r\n      }else{\r\n        // Highlight errors\r\n        if(form.reportValidity) form.reportValidity();\r\n        $form.addClass(cssValidationClass);\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  $form.on(\"change\", function(){\r\n    if($form.get(0).checkValidity()) {\r\n      pageIncrement = 0;\r\n      loadingFlag = 'KEEP_LOAD';\r\n      loading('on');\r\n      resetForm();\r\n      submitForm(pageIncrement);\r\n    }\r\n  } );\r\n  // Mobile devices. Force 'change' by 'Go' press\r\n\r\n  $form.on(\"submit\", function (e) {\r\n    e.preventDefault();\r\n  });\r\n\r\n  $modal.on('hidden.bs.modal',function (e) {\r\n    resetForm();\r\n    keyword.val('');//clear search input\r\n  });\r\n\r\n})(jQuery);"]}