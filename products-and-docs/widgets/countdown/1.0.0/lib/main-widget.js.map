{"version":3,"sources":["../src/main-widget.es6"],"names":[],"mappings":"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","file":"main-widget.js","sourcesContent":["class CountdownClock {\r\n  set endTime(endTime) { this.config.endTime = endTime; }\r\n  get endTime(){ return this.config.endTime || new Date();}\r\n\r\n  set interval(interval) { return this.config.interval = interval; }\r\n  get interval(){ return this.config.interval || 1000;}\r\n\r\n  set onChange(fn) { return this.config.onChange = fn; }\r\n  get onChange(){ return this.config.onChange || ((time) => {})}\r\n\r\n  constructor(config = {}) {\r\n    this.config = config;\r\n    this.updateClock();\r\n    if(this.config.endTime) this.initInterval();\r\n  }\r\n\r\n  initInterval(){\r\n    this.timeinterval = setInterval(this.updateClock.bind(this), this.interval);\r\n  }\r\n\r\n  update(endTime){\r\n    clearInterval(this.timeinterval);\r\n    this.endTime = endTime;\r\n    this.updateClock();\r\n    if(endTime) this.initInterval();\r\n  }\r\n\r\n  updateClock() {\r\n    let timeRemaining = this.getTimeRemaining();\r\n    this.onChange(timeRemaining);\r\n    if (timeRemaining.total <= 0) clearInterval(this.timeinterval);\r\n  }\r\n\r\n  /*\r\n  //Covert datetime by GMT offset\r\n  //If toUTC is true then return UTC time other wise return local time\r\n  convertLocalDateToUTCDate(date, toUTC) {\r\n    date = new Date(date);\r\n    //Local time converted to UTC\r\n    var localOffset = date.getTimezoneOffset() * 60000;\r\n    var localTime = date.getTime();\r\n    (toUTC)\r\n      ? date = localTime + localOffset\r\n      : date = localTime - localOffset;\r\n    date = new Date(date);\r\n    return date;\r\n  }\r\n  */\r\n\r\n  getTimeRemaining() {\r\n    let total = Date.parse(this.endTime) - Date.parse(new Date());\r\n    if(total <= 0) total = 0;\r\n    let seconds = Math.floor((total / 1000) % 60),\r\n      minutes = Math.floor((total / 1000 / 60) % 60),\r\n      hours = Math.floor((total / 3600000 /* (1000 * 60 * 60) */) % 24),\r\n      days = Math.floor(total / 86400000 /* (1000 * 60 * 60 * 24) */),\r\n      monthLeft = 0;\r\n      //years = 0;\r\n\r\n    let daysInMonth = function(year,month){\r\n      var D=new Date(year, month-1, 1, 12);\r\n      return parseInt((-Date.parse(D)+D.setMonth(D.getMonth()+1)+36e5)/864e5);\r\n    };\r\n\r\n    let today = new Date(),\r\n        curr_day = today.getUTCDate(),\r\n        curr_month = today.getUTCMonth(),\r\n        curr_year = today.getUTCFullYear(),\r\n        curr_days_in_month = daysInMonth(curr_year, curr_month);\r\n\r\n    if(days > curr_days_in_month){\r\n      let servYear = new Date(this.endTime).getUTCFullYear(),\r\n          servMonth = new Date(this.endTime).getUTCMonth(),\r\n          servDay = new Date(this.endTime).getUTCDate(),\r\n          serv_days_in_month = daysInMonth(servYear, servMonth);\r\n\r\n      monthLeft = Math.floor( days/daysInMonth(servYear,servMonth) );\r\n\r\n      days = Math.abs(servDay - curr_day);\r\n      \r\n      /*if(monthLeft > 99){\r\n        years = servYear - curr_year;\r\n        monthLeft = monthLeft-1 - years*12;\r\n        //console.log( 'monthLeft ',monthLeft );\r\n      }*/\r\n    }\r\n\r\n    return {\r\n      total,\r\n      //years,\r\n      monthLeft,\r\n      days,\r\n      hours,\r\n      minutes,\r\n      seconds\r\n    };\r\n  }\r\n}\r\n\r\nclass TicketmasterCountdownWidget {\r\n\r\n  set config(attrs) { this.widgetConfig = this.loadConfig(attrs); }\r\n  get config() { return this.widgetConfig; }\r\n\r\n  set event(responce){ this.eventResponce = this.parseEvent(responce);}\r\n  get event(){ return this.eventResponce;}\r\n\r\n  get borderSize(){ return this.config.border || 0;}\r\n\r\n  get eventUrl(){ return \"http://www.ticketmaster.com/event/\"; }\r\n\r\n  set eventId(id){ this.config.id = id;}\r\n  get eventId(){ return this.config.id;}\r\n\r\n  get apiUrl(){ return this.config.id ? `https://app.ticketmaster.com/discovery/v2/events/${this.config.id}.json` : `https://app.ticketmaster.com/discovery/v2/events/${this.eventId}.json`; }\r\n\r\n  //get themeUrl() { return \"http://localhost:4000/products-and-docs/widgets/countdown/1.0.0/theme/\"; }\r\n  get themeUrl() { return \"http://ticketmaster-api-staging.github.io/products-and-docs/widgets/countdown/1.0.0/theme/\"; }\r\n\r\n  get portalUrl(){ return \"http://ticketmaster-api-staging.github.io/\"; }\r\n\r\n  get logoUrl() { return \"http://www.ticketmaster.com/\"; }\r\n\r\n  get legalNoticeUrl() { return \"http://developer.ticketmaster.com/support/terms-of-use/\"; }\r\n\r\n  get questionUrl() { return \"http://developer.ticketmaster.com/support/faq/\"; }\r\n\r\n  get updateExceptions() { return [\"width\", \"height\", \"border\", \"borderradius\", \"layout\", \"propotion\", \"seconds\"]}\r\n\r\n  get hideMessageDelay(){ return 5000; }\r\n\r\n  get tmWidgetWhiteList(){ return [\"2200504BAD4C848F\", \"00005044BDC83AE6\", \"1B005068DB60687F\", \"1B004F4DBEE45E47\", \"3A004F4ED7829D5E\", \"3A004F4ED1FC9B63\", \"1B004F4FF83289C5\", \"1B004F4FC0276888\", \"0E004F4F3B7DC543\", \"1D004F4F09C61861\", \"1600505AC9A972A1\", \"22004F4FD82795C6\", \"01005057AFF54574\", \"01005056FAD8793A\", \"3A004F4FB2453240\", \"22004F50D2149AC6\", \"01005059AD49507A\", \"01005062B4236D5D\"]; }\r\n\r\n  get eventIdDefault(){ return '1Ad0ZfdGkMoCQHJ';}\r\n\r\n  isConfigAttrExistAndNotEmpty(attr) {\r\n    if( !this.config.hasOwnProperty(attr) || this.config[attr] === \"undefined\"){\r\n      return false;\r\n    }else if( this.config[attr] === \"\"){\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  \r\n  get eventReqAttrs(){\r\n    let attrs = {},\r\n    params = [\r\n      {\r\n        attr: 'tmapikey',\r\n        verboseName: 'apikey'\r\n      }\r\n    ];\r\n\r\n    for(let i in params){\r\n      let item = params[i];\r\n      if(this.isConfigAttrExistAndNotEmpty(item.attr))\r\n        attrs[item.verboseName] = this.config[item.attr];\r\n    }\r\n\r\n    return attrs;\r\n  }\r\n\r\n  constructor(root) {\r\n    this.widgetRoot = root;\r\n\r\n    this.eventsRootContainer = document.createElement(\"div\");\r\n    this.eventsRootContainer.classList.add(\"events-root-container\");\r\n    this.widgetRoot.appendChild(this.eventsRootContainer);\r\n\r\n    this.eventsRoot = document.createElement(\"ul\");\r\n    this.eventsRoot.classList.add(\"events-root\");\r\n    this.eventsRootContainer.appendChild(this.eventsRoot);\r\n\r\n    // Set theme modificators\r\n    /*this.themeModificators = {\r\n      \"oldschool\" : this.oldSchoolModificator.bind(this)\r\n    };*/\r\n\r\n    this.config = this.widgetRoot.attributes;\r\n    this.eventId = this.config.id;\r\n\r\n    if(this.config.theme !== null && !document.getElementById(`widget-theme-${this.config.theme}`)){\r\n      this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\r\n    }\r\n\r\n    this.widgetRoot.style.height = `${this.config.height}px`;\r\n    this.widgetRoot.style.width  = `${this.config.width}px`;\r\n\r\n    this.eventsRootContainer.style.height = `${this.config.height}px`;\r\n    this.eventsRootContainer.style.width  = `${this.config.width}px`;\r\n    this.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\r\n    this.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\r\n\r\n    this.initBuyBtn();\r\n\r\n    this.AdditionalElements();\r\n\r\n    this.initMessage();\r\n\r\n    this.buildCountdown();\r\n\r\n    if(this.apiUrl){\r\n      this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n    }else{\r\n      this.showMessage(\"Please enter event ID.\", true, null );\r\n    }\r\n\r\n    /*if( this.themeModificators.hasOwnProperty( this.widgetConfig.theme ) ) {\r\n      this.themeModificators[ this.widgetConfig.theme ]();\r\n    }*/\r\n\r\n    this.embedUniversePlugin();\r\n    this.embedTMPlugin();\r\n\r\n    this.countDownWrapper.classList.add(\"events-count-down\");\r\n\r\n    this.countdownClock = new CountdownClock({\r\n      onChange: this.onCountdownChange.bind(this)\r\n    });\r\n\r\n    this.toggleSecondsVisibility();\r\n  }\r\n\r\n  getNormalizedDateValue(val){\r\n    return (val < 0 || val > 9 ? \"\" : \"0\") + val\r\n  }\r\n\r\n  toggleSecondsVisibility(){\r\n    if(this.countDownMonth.innerHTML > 0){\r\n      this.countDownWrapper.classList.add(\"hide-seconds\");\r\n      this.countDownWrapper.classList.remove(\"hide-days\");\r\n      this.countDownWrapper.classList.remove(\"hide-month\");//Removing a class that does not exist, does NOT throw an error\r\n    }else if(this.countDownDays.innerHTML <= 0){\r\n      this.countDownWrapper.classList.add(\"hide-month\");\r\n      this.countDownWrapper.classList.add(\"hide-days\");\r\n      this.countDownWrapper.classList.remove(\"hide-seconds\");\r\n    }else {\r\n      this.countDownWrapper.classList.add(\"hide-month\");\r\n      this.countDownWrapper.classList.remove(\"hide-days\");\r\n      this.countDownWrapper.classList.remove(\"hide-seconds\");\r\n    }\r\n  }\r\n\r\n  onCountdownChange(data){\r\n    let timeLeft = this.getNormalizedDateValue(data.total);\r\n\r\n    /*toggle CountDown-Box Visibility*/\r\n    if(timeLeft <= 0){\r\n      this.countDownWrapper.classList.add(\"hide-countDownBox\");\r\n      if(this.eventId && this.event){\r\n        this.showMessage(`This event has taken place`, false , \"event-message-started\");\r\n        return false; //exit if event has taken place\r\n      }\r\n    }else this.countDownWrapper.classList.remove(\"hide-countDownBox\");\r\n\r\n    if(data.monthLeft > 99){\r\n      this.showMessage(`This event starts in more than ${data.monthLeft} month, ${data.days} days, ${data.hours} hours`, false , \"event-message-started\");\r\n      this.countDownWrapper.classList.add(\"hide-countDownBox\");\r\n      return false;\r\n    }\r\n\r\n    this.countDownMonth.innerHTML = this.getNormalizedDateValue(data.monthLeft);\r\n    this.countDownDays.innerHTML = this.getNormalizedDateValue(data.days);\r\n    this.countDownHours.innerHTML = this.getNormalizedDateValue(data.hours);\r\n    this.countDownMinute.innerHTML = this.getNormalizedDateValue(data.minutes);\r\n    this.countDownSecond.innerHTML = this.getNormalizedDateValue(data.seconds);\r\n\r\n    this.toggleSecondsVisibility();\r\n\r\n    //console.log('event is null?', this.apiUrl , '\\n this.eventId', this.eventId);\r\n  }\r\n\r\n  buildCountdown(){\r\n    this.countDownWrapper = document.createElement(\"div\");\r\n    this.countDownWrapper.classList.add(\"events-count-down\");\r\n    this.countDownMonth = document.createElement(\"span\");\r\n    this.countDownDays = document.createElement(\"span\");\r\n    this.countDownHours = document.createElement(\"span\");\r\n    this.countDownMinute = document.createElement(\"span\");\r\n    this.countDownSecond = document.createElement(\"span\");\r\n\r\n    this.countDownMonth.innerHTML = '00';\r\n    this.countDownDays.innerHTML = '00';\r\n    this.countDownHours.innerHTML = '00';\r\n    this.countDownMinute.innerHTML = '00';\r\n    this.countDownSecond.innerHTML = '00';\r\n\r\n    this.countDownMonth.classList.add(\"events-count-down__month\");\r\n    this.countDownDays.classList.add(\"events-count-down__day\");\r\n    this.countDownHours.classList.add(\"events-count-down__hour\");\r\n    this.countDownMinute.classList.add(\"events-count-down__minute\");\r\n    this.countDownSecond.classList.add(\"events-count-down__second\");\r\n\r\n    this.countDownWrapper.appendChild(this.countDownMonth);\r\n    this.countDownWrapper.appendChild(this.countDownDays);\r\n    this.countDownWrapper.appendChild(this.countDownHours);\r\n    this.countDownWrapper.appendChild(this.countDownMinute);\r\n    this.countDownWrapper.appendChild(this.countDownSecond);\r\n\r\n    this.eventsRootContainer.appendChild(this.countDownWrapper);\r\n  }\r\n\r\n  initBuyBtn(){\r\n    this.buyBtn = document.createElement(\"a\");\r\n    this.buyBtn.appendChild(document.createTextNode('BUY NOW'));\r\n    this.buyBtn.classList.add(\"event-buy-btn\");\r\n    this.buyBtn.target = '_blank';\r\n    this.buyBtn.href = '';\r\n    this.buyBtn.setAttribute('onclick', \"ga('send', 'event', 'CountdownClickBuyButton', 'click');\");\r\n    this.buyBtn.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n    });\r\n    this.eventsRootContainer.appendChild(this.buyBtn);\r\n  }\r\n\r\n  updateTransition(url) {\r\n    var el = this.eventsRootContainer.querySelector(\".event-logo.centered-logo\");\r\n    if(url !=='') {\r\n      if(el){\r\n        el.classList.add(\"right-logo\");\r\n        el.classList.remove(\"centered-logo\");\r\n      }else return;\r\n    }\r\n    else{\r\n      el = this.eventsRootContainer.querySelector(\".event-logo.right-logo\");\r\n      if(el){\r\n        el.classList.remove(\"right-logo\");\r\n        el.classList.add(\"centered-logo\");\r\n      }\r\n    }\r\n  }\r\n\r\n  setBuyBtnUrl(){\r\n    if(this.buyBtn){\r\n      let event = this.event,\r\n          url = '';\r\n      if(event){\r\n        if(event.url){\r\n          if((this.isUniversePluginInitialized && this.isUniverseUrl(event.url)) || (this.isTMPluginInitialized && this.isAllowedTMEvent(event.url))){\r\n            url = event.url;\r\n          }\r\n          this.updateTransition(url);\r\n        }\r\n      }\r\n      this.buyBtn.href = url;\r\n    }\r\n  }\r\n\r\n  isUniverseUrl(url){\r\n    return (url.match(/universe.com/g) || url.match(/uniiverse.com/g));\r\n  }\r\n\r\n  isAllowedTMEvent(url){\r\n    for (var t = [/(?:ticketmaster\\.com)\\/(.*\\/)?event\\/([^\\/?#]+)/, /(?:concerts\\.livenation\\.com)\\/(.*\\/)?event\\/([^\\/?#]+)/], n = null, r = 0; r < t.length && (n = url.match(t[r]), null === n); r++);\r\n    let id = (null !== n ? n[2] : void 0);\r\n    return (this.tmWidgetWhiteList.indexOf(id) > -1);\r\n  }\r\n\r\n  embedTMPlugin(){\r\n    let id = 'id_tm_widget';\r\n    if( !document.getElementById(id) ) {\r\n      let script = document.createElement('script');\r\n      script.setAttribute('src', this.portalUrl + 'scripts/vendors/tm.js');\r\n      script.setAttribute('type', 'text/javascript');\r\n      script.setAttribute('charset', 'UTF-8');\r\n      script.setAttribute('id', id);\r\n      (document.head || document.getElementsByTagName('head')[0]).appendChild(script);\r\n    }\r\n    this.isTMPluginInitialized = true;\r\n  }\r\n\r\n  embedUniversePlugin(){\r\n    let id = 'id_universe_widget';\r\n    if( !document.getElementById(id) ){\r\n      let script = document.createElement('script');\r\n      script.setAttribute('src', 'https://www.universe.com/embed.js');\r\n      script.setAttribute('type', 'text/javascript');\r\n      script.setAttribute('charset', 'UTF-8');\r\n      script.setAttribute('id', id);\r\n      (document.head || document.getElementsByTagName('head')[0]).appendChild(script);\r\n    }\r\n    this.isUniversePluginInitialized = true;\r\n  }\r\n\r\n  // Message\r\n  initMessage(){\r\n    this.messageDialog = document.createElement('div');\r\n    this.messageDialog.classList.add(\"event-message\");\r\n    this.messageContent = document.createElement('div');\r\n    this.messageContent.classList.add(\"event-message__content\");\r\n\r\n    let messageClose = document.createElement('div');\r\n    messageClose.classList.add(\"event-message__btn\");\r\n    messageClose.addEventListener(\"click\", ()=> {\r\n      this.hideMessage();\r\n    });\r\n\r\n    this.messageDialog.appendChild(this.messageContent);\r\n    this.messageDialog.appendChild(messageClose);\r\n    this.eventsRootContainer.appendChild(this.messageDialog);\r\n  }\r\n\r\n  showMessage(message, hideMessageWithoutDelay , /*string togleClassName*/className ){\r\n    if(message.length){\r\n      this.hideMessageWithoutDelay = hideMessageWithoutDelay;\r\n      this.messageContent.innerHTML = message;\r\n      this.messageDialog.classList.add(\"event-message-visible\");\r\n      this.messageDialog.classList.remove(\"event-message-started\");\r\n    }\r\n\r\n    if( className ){\r\n      this.messageDialog.classList.add(className);\r\n    }else {\r\n      this.messageDialog.classList.add(\"event-message-visible\");\r\n      this.messageDialog.classList.remove(className);\r\n    }\r\n\r\n    className = null;\r\n\r\n  }\r\n\r\n  hideMessage(){\r\n    if(this.messageTimeout) clearTimeout(this.messageTimeout); // Clear timeout and hide message immediately.\r\n    this.messageDialog.classList.remove(\"event-message-visible\");\r\n  }\r\n  // End message\r\n\r\n  AdditionalElements(){\r\n    var legalNoticeContent = document.createTextNode('Legal Notice'),\r\n        legalNotice = document.createElement(\"a\");\r\n    legalNotice.appendChild(legalNoticeContent);\r\n    legalNotice.classList.add(\"legal-notice\");\r\n    legalNotice.target = '_blank';\r\n    legalNotice.href = this.legalNoticeUrl;\r\n    this.widgetRoot.appendChild(legalNotice);\r\n\r\n    var logo = document.createElement('a');\r\n    logo.classList.add(\"event-logo\",\"centered-logo\");\r\n    logo.target = '_blank';\r\n    logo.href = this.logoUrl;\r\n    logo.innerHTML = 'Powered by ';\r\n\r\n    var logoBox = document.createElement('div');\r\n    logoBox.classList.add(\"event-logo-box\");\r\n    logoBox.appendChild(logo);\r\n    this.eventsRootContainer.appendChild(logoBox);\r\n\r\n    let question = document.createElement('a');\r\n    question.classList.add(\"event-question\");\r\n    question.target = '_blank';\r\n    question.href = this.questionUrl;\r\n    this.eventsRootContainer.appendChild(question);\r\n  }\r\n\r\n  //adds general admission element for OLDSCHOOL theme\r\n  /*oldSchoolModificator(){\r\n    console.log('inside oldSchoolModificator' );\r\n  }*/\r\n\r\n  formatDate(date) {\r\n    var result = '';\r\n    if(!date.day) return result; // Day is required\r\n\r\n    var MONTH_NAMES = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],\r\n        DAY_NAMES = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\r\n        dayArray = date.day.split('-'),\r\n        d = parseInt(dayArray[2]),\r\n        M = parseInt(dayArray[1]);\r\n\r\n    var E = new Date(date.day).getDay();\r\n    result = DAY_NAMES[E] + ', ' + MONTH_NAMES[M - 1] + ' ' + d + ', ' + dayArray[0];\r\n\r\n    if(!date.time) return result;\r\n\r\n    var timeArray = date.time.split(':'),\r\n      H = parseInt(timeArray[0]),\r\n      m = timeArray[1],\r\n      a = \"AM\";\r\n\r\n    if (H > 11) a = \"PM\";\r\n    if (H == 0) {\r\n      H = 12;\r\n    } else if (H > 12) {\r\n      H = H - 12;\r\n    }\r\n\r\n    return result + ' ' + this.getNormalizedDateValue(H) + ':' + m + ' ' + a;\r\n  }\r\n\r\n  clearEvents(){\r\n    this.eventsRoot.innerHTML = \"\";\r\n  }\r\n\r\n  clear(){\r\n    var modificatorList = this.widgetRoot.getElementsByClassName('modificator');\r\n    while (modificatorList.length) {\r\n      let el = modificatorList[0],\r\n          parent = el.parentNode;\r\n      parent.removeChild(el);\r\n    }\r\n    this.clearEvents();\r\n  }\r\n\r\n  update(isFullWidthTheme) {\r\n\r\n    let oldTheme = this.config.constructor();\r\n    for (let attr in this.config) {\r\n      if (this.config.hasOwnProperty(attr)) oldTheme[attr] = this.config[attr];\r\n    }\r\n\r\n    this.config = this.widgetRoot.attributes;\r\n    this.widgetRoot.style.height = `${this.config.height}px`;\r\n    this.widgetRoot.style.width  = `${this.config.width}px`;\r\n    this.eventsRootContainer.style.height = `${this.config.height}px`;\r\n    this.eventsRootContainer.style.width  = `${this.config.width}px`;\r\n    this.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\r\n    this.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\r\n\r\n    if(this.config.theme !== null){\r\n     this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\r\n    }\r\n\r\n    if(this.needToUpdate(this.config, oldTheme, this.updateExceptions) || isFullWidthTheme){\r\n      this.clear();\r\n\r\n      if(this.widgetConfig.theme !== 'simple_countdown') {\r\n        let heightStatic = '700px';\r\n        //draw inline style\r\n        //border\r\n        this.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\r\n        this.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\r\n\r\n        //set width\r\n        this.widgetRoot.style.width = `100%`;\r\n        this.widgetRoot.style.height = heightStatic;\r\n        this.widgetRoot.style.display = `block`;\r\n        this.eventsRootContainer.style.width  = `100%`;\r\n        this.eventsRootContainer.style.height = heightStatic;\r\n        this.widgetConfig.width = `100%`;\r\n      }\r\n\r\n      /*if( this.themeModificators.hasOwnProperty( this.widgetConfig.theme ) ) {\r\n        this.themeModificators[ this.widgetConfig.theme ]();\r\n      }*/\r\n\r\n      if(this.apiUrl && this.eventId){\r\n        this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n      }else{\r\n        this.showMessage(\"No results were found.\", true);\r\n        this.countdownClock.update(null);\r\n      }\r\n    }else{\r\n      let events = this.widgetRoot.getElementsByClassName(\"event-wrapper\");\r\n      for(let i in events){\r\n        if(events.hasOwnProperty(i) && events[i].style !== undefined){\r\n          events[i].style.width = `${this.config.width - this.borderSize * 2}px`;\r\n          events[i].style.height = `${this.config.height - this.borderSize * 2}px`;\r\n        }\r\n      }\r\n    }\r\n    //this.toggleSecondsVisibility();\r\n  }\r\n\r\n  needToUpdate(newTheme, oldTheme, forCheck = []){\r\n    return Object.keys(newTheme).map(function(key){\r\n      if(forCheck.indexOf(key) > -1) return true;\r\n      //console.warn([key, newTheme[key], oldTheme[key], newTheme[key] === oldTheme[key]])\r\n      return newTheme[key] === oldTheme[key] ;\r\n    }).indexOf(false) > -1\r\n  }\r\n\r\n  loadConfig(NamedNodeMap){\r\n      var config = {};\r\n      Object.keys(NamedNodeMap).map(function(value){\r\n        if( typeof(NamedNodeMap[value].name) !== \"undefined\" && NamedNodeMap[value].name.indexOf(\"w-\") !== -1){\r\n          config[ NamedNodeMap[value].name.replace(/w-/g, \"\").replace(/-/g, \"\") ] = NamedNodeMap[value].value;\r\n        }\r\n      });\r\n      return config;\r\n  }\r\n\r\n  styleLoadingHandler(){\r\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\r\n      if(this.status == 200){\r\n        var style = document.createElement(\"style\");\r\n        style.setAttribute(\"type\",\"text/css\");\r\n        style.setAttribute(\"id\",`widget-theme-${this.widget.config.theme}`);\r\n        style.textContent = this.responseText;\r\n        document.getElementsByTagName(\"head\")[0].appendChild(style);\r\n      }\r\n      else {\r\n        //alert(\"theme wasn't loaded\");\r\n        console.log(\"theme wasn't loaded\");\r\n      }\r\n    }\r\n  }\r\n\r\n  onEventLoadError(status){\r\n    this.event = false;\r\n    this.showMessage(\"No results were found.\", true, null);\r\n    console.log(`There was an error status - ${status}`);\r\n  }\r\n\r\n  eventsLoadingHandler(){\r\n    let widget = this.widget;\r\n    widget.clearEvents(); // Additional clearing after each loading\r\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\r\n      if(this.status == 200){\r\n        widget.event = JSON.parse(this.responseText);\r\n        if(widget.event){\r\n          widget.publishEvent(widget.event);\r\n          widget.hideMessage();\r\n        }\r\n      }\r\n      else if(this.status == 400) {\r\n        widget.onEventLoadError.call(widget, this.status);\r\n      }\r\n      else {\r\n        widget.onEventLoadError.call(widget, this.status);\r\n      }\r\n      // http://js2coffee.thomaskalka.de/ - widget.event?.date?.dateTime\r\n      let _ref, _ref2;\r\n      widget.countdownClock.update((_ref = widget.event) != null ? (_ref2 = _ref.date) != null ? _ref2.dateTime || _ref2.day : void 0 : void 0);\r\n    }\r\n    widget.setBuyBtnUrl();\r\n  }\r\n\r\n  publishEvent(event, parentNode){\r\n    parentNode = parentNode || this.eventsRoot;\r\n    let DOMElement = this.createDOMItem(event);\r\n    parentNode.appendChild(DOMElement);\r\n  }\r\n\r\n  getImageForEvent(images){\r\n    var width = this.config.width,\r\n      height = this.config.height;\r\n\r\n    images.sort(function(a,b) {\r\n      if (a.width < b.width)\r\n        return -1;\r\n      else if (a.width > b.width)\r\n        return 1;\r\n      else\r\n        return 0;\r\n    });\r\n\r\n    var myImg = \"\";\r\n    images.forEach(function(element){\r\n      if(element.width >= width && element.height >= height && !myImg){\r\n        myImg = element.url;\r\n      }\r\n    });\r\n    if(myImg === \"\") {\r\n      myImg = images[images.length-1].url;\r\n    }\r\n    return myImg;\r\n  }\r\n\r\n  parseEvent(eventSet){\r\n    if(!eventSet.id){\r\n      if(typeof($widgetModalNoCode) !== \"undefined\"){\r\n        $widgetModalNoCode.modal();\r\n      }\r\n      return false;\r\n    }\r\n\r\n    let currentEvent = {};\r\n\r\n    currentEvent.id = eventSet.id;\r\n    currentEvent.url = eventSet.url;\r\n    currentEvent.name = eventSet.name;\r\n\r\n    currentEvent.date = {\r\n      day: eventSet.dates.start.localDate,\r\n      time: eventSet.dates.start.localTime,\r\n      dateTime: eventSet.dates.start.dateTime\r\n    };\r\n\r\n    if(eventSet.hasOwnProperty('_embedded') && eventSet._embedded.hasOwnProperty('venues')){\r\n      let venue = eventSet._embedded.venues[0];\r\n      if(venue){\r\n        if(venue.address)\r\n          currentEvent.address = venue.address;\r\n\r\n        if(venue.name){\r\n          if(!currentEvent.address) currentEvent.address = {};\r\n          currentEvent.address.name = venue.name;\r\n        }\r\n      }\r\n    }\r\n\r\n    currentEvent.img = this.getImageForEvent(eventSet.images);\r\n    return currentEvent;\r\n  }\r\n\r\n\r\n  makeRequest(handler, url=this.apiUrl, attrs={}, method=\"GET\"){\r\n    attrs = Object.keys(attrs).map(function(key){\r\n      return `${key}=${attrs[key]}`;\r\n    }).join(\"&\");\r\n\r\n    url = [url,attrs].join(\"?\");\r\n\r\n    this.xmlHTTP = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    if(method == \"POST\") {\r\n      this.xmlHTTP.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\r\n    }\r\n    this.xmlHTTP.widget = this;\r\n    this.xmlHTTP.onreadystatechange = handler;\r\n    this.xmlHTTP.open(method, url, true);\r\n    this.xmlHTTP.send();\r\n  }\r\n\r\n\r\n  initPretendedLink(el, url, isBlank){\r\n    if(el && url){\r\n      el.setAttribute('data-url', url);\r\n      el.classList.add(\"event-pretended-link\");\r\n      el.addEventListener('click', function(){\r\n        let url = this.getAttribute('data-url');\r\n        if(url){\r\n          let win = window.open(url, (isBlank ? '_blank' : '_self'));\r\n          win.focus();\r\n        }\r\n      });\r\n    }\r\n    return el;\r\n  }\r\n\r\n\r\n  createDOMItem(itemConfig){\r\n    var medWrapper = document.createElement(\"div\");\r\n    medWrapper.classList.add(\"event-content-wraper\");\r\n\r\n    var event = document.createElement(\"li\");\r\n    event.classList.add(\"event-wrapper\");\r\n    event.style.height = `${this.config.height - this.borderSize * 2}px`;\r\n    event.style.width  = `${this.config.width - this.borderSize * 2}px`;\r\n\r\n    var image = document.createElement(\"span\");\r\n    image.classList.add(\"bg-cover\");\r\n    image.style.backgroundImage = `url('${itemConfig.img}')`;\r\n    event.appendChild(image);\r\n\r\n    var nameContent = document.createTextNode(itemConfig.name),\r\n    name = document.createElement(\"span\");\r\n    name.classList.add(\"event-name\");\r\n    name.appendChild(nameContent);\r\n    this.initPretendedLink(name, itemConfig.url, true);\r\n    name.setAttribute('onclick', `ga('send', 'event', 'CountDownClickeventName_theme=${this.config.theme}_width=${this.config.width}_height=${this.config.height}_color_scheme=light', 'click', '${itemConfig.url}');`);\r\n    medWrapper.appendChild(name);\r\n\r\n\r\n    var dateTimeContent = document.createTextNode(this.formatDate(itemConfig.date)),\r\n    dateTime = document.createElement(\"span\");\r\n    dateTime.classList.add(\"event-date\");\r\n    dateTime.appendChild(dateTimeContent);\r\n\r\n    var dateWraper = document.createElement(\"span\");\r\n    dateWraper.classList.add(\"event-date-wraper\");\r\n    dateWraper.appendChild(dateTime);\r\n    medWrapper.appendChild(dateWraper);\r\n\r\n    if(itemConfig.hasOwnProperty(\"address\")){\r\n      var addressWrapper = document.createElement(\"span\");\r\n      addressWrapper.classList.add(\"address-wrapper\");\r\n\r\n      if( itemConfig.address.hasOwnProperty(\"name\") ){\r\n        var addressNameText = document.createTextNode(itemConfig.address.name),\r\n            addressName =  document.createElement(\"span\");\r\n        addressName.classList.add(\"event-address\");\r\n        addressName.classList.add(\"event-address-name\");\r\n        addressName.appendChild(addressNameText);\r\n        addressWrapper.appendChild(addressName);\r\n      }\r\n\r\n      if( itemConfig.address.hasOwnProperty(\"line1\") ){\r\n        var addressOneText = document.createTextNode(itemConfig.address.line1),\r\n        addressOne =  document.createElement(\"span\");\r\n        addressOne.classList.add(\"event-address\");\r\n        addressOne.appendChild(addressOneText);\r\n        addressWrapper.appendChild(addressOne);\r\n      }\r\n\r\n      if( itemConfig.address.hasOwnProperty(\"line2\") ){\r\n        var addressTwoText = document.createTextNode(itemConfig.address.line2),\r\n        addressTwo =  document.createElement(\"span\");\r\n        addressTwo.classList.add(\"event-address\");\r\n        addressTwo.appendChild(addressTwoText);\r\n        addressWrapper.appendChild(addressTwo);\r\n      }\r\n\r\n      medWrapper.appendChild(addressWrapper);\r\n    }\r\n\r\n    if(itemConfig.hasOwnProperty(\"categories\")) {\r\n      var categoriesWrapper = document.createElement(\"span\");\r\n      categoriesWrapper.classList.add(\"category-wrapper\");\r\n\r\n      itemConfig.categories.forEach(function (element) {\r\n        var categoryText = document.createTextNode(element),\r\n          category = document.createElement(\"span\");\r\n        category.classList.add(\"event-category\");\r\n        category.appendChild(categoryText);\r\n        categoriesWrapper.appendChild(category);\r\n      });\r\n      medWrapper.appendChild(categoriesWrapper);\r\n    }\r\n\r\n    event.appendChild(medWrapper);\r\n\r\n    return event;\r\n  }\r\n\r\n  /*\r\n   * Config block\r\n   */\r\n\r\n  decConfig(config){\r\n    return JSON.parse(window.atob(config));\r\n  }\r\n\r\n  encConfig(config){\r\n    return window.btoa(config);\r\n  }\r\n\r\n}\r\n\r\nlet widgetsCountdown = [];\r\n(function () {\r\n  let widgetContainers = document.querySelectorAll(\"div[w-type='countdown']\");\r\n  for (let i = 0; i < widgetContainers.length; ++i) {\r\n    widgetsCountdown.push(new TicketmasterCountdownWidget(widgetContainers[i]));\r\n  }\r\n\r\n})();\r\n\r\n(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\r\n      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\r\n    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\r\n})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\r\n\r\nga('create', 'UA-78317809-1', 'auto');\r\nga('send', 'pageview');\r\n"]}